

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. マイグレーションガイド &mdash; Server User Guide 7.0.4 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="prev" title="5.7. MongoDBクラスタ" href="extended/mongodb_cluster.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Server User Guide
          

          
          </a>

          
            
            
              <div class="version">
                7.0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. イントロダクション</a></li>
<li class="toctree-l1"><a class="reference internal" href="system.html">2. システム構成</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/index.html">3. 基本利用手順</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure/index.html">4. コンフィグレーション</a></li>
<li class="toctree-l1"><a class="reference internal" href="extended/index.html">5. 詳細手順</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. マイグレーションガイド</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ver-7-0-3-ver-7-0-4">6.1. ver 7.0.3 → ver 7.0.4 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">6.1.1. デベロッパーコンソールサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-7-0-2-7-0-3">6.2. ver 7.0.2 → 7.0.3 での変更点</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ver-7-0-0-7-0-2">6.3. ver 7.0.0 → 7.0.2 での変更点</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-5-3-6-5-4">6.4. ver 6.5.3 → 6.5.4 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">6.4.1. デベロッパーコンソールサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-5-x-7-0-0">6.5. ver 6.5.x → 7.0.0 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">6.5.1. ライセンス認証</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">6.5.2. オブジェクトストレージ強化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#openid-connect">6.5.3. OpenID Connect認証 アカウントリンク対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-5-2-6-5-3">6.6. ver 6.5.2 → 6.5.3 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api">6.6.1. APIサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-5-1-6-5-2">6.7. ver 6.5.1 → 6.5.2 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">6.7.1. APIサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-5-0-ver-6-5-1">6.8. ver 6.5.0 → ver 6.5.1 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">6.8.1. APIサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-0-3-6-5-0">6.9. ver 6.0.3 → 6.5.0 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rest-api">6.9.1. 準拠する REST API の改訂</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saml">6.9.2. SAML 認証機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">6.9.3. OpenID Connect認証機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">6.9.4. クライアント証明書認証機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldap">6.9.5. LDAPグループ連携機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">6.9.6. ローカルユーザ・外部認証ユーザ混在対応</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">6.9.7. ファイルストレージ強化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-gateway">6.9.8. API Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">6.9.9. セキュリティ強化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">6.9.10. デベロッパーコンソール強化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">6.9.11. 設定項目改善</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">6.9.12. サーバ管理ツール強化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apns-alpn-boot">6.9.13. APNs 利用時の ALPN Boot 不要化</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-0-2-6-0-3">6.10. ver 6.0.2 → 6.0.3 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id24">6.10.1. APIサーバ/デベロッパーコンソールサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-6-0-0-6-0-2">6.11. ver 6.0.0 → 6.0.2 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">6.11.1. API サーバ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">6.11.2. デベロッパーコンソールサーバ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-5-0-2-6-0-0">6.12. ver 5.0.2 → 6.0.0 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id27">6.12.1. 準拠する REST API の改訂</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">6.12.2. 設定ファイル変更</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-gateway-http-proxy">6.12.3. API Gateway (HTTP Proxy) の仕様変更</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">6.12.4. 初期システム管理者アカウントの自動追加</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-5-0-1-5-0-2">6.13. ver 5.0.1 → 5.0.2 での変更点</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ver-5-0-0-5-0-1">6.14. ver 5.0.0 → 5.0.1 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cors-access-control-allow-credential">6.14.1. CORS Access-Control-Allow-Credential ヘッダ許可設定追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">6.14.2. 不具合修正</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-4-0-3-5-0-0">6.15. ver 4.0.3 → 5.0.0 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id34">6.15.1. 設定ファイル変更</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-gateway-cloud-functions">6.15.2. API Gateway / Cloud Functions機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">6.15.3. ログ閲覧機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">6.15.4. APIレートリミット(スロットリング)機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">6.15.5. パスワードポリシ・ロックポリシの強化・設定変更機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#db">6.15.6. テナント毎のDBクラスタ切り替え機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">6.15.7. オブジェクトストレージ MongoDB クエリタイムアウト設定の追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">6.15.8. オブジェクトストレージ クエリプランナ実行機能の追加</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-4-0-2-4-0-3">6.16. ver 4.0.2 → 4.0.3 での変更点</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ver-4-0-1-4-0-2">6.17. ver 4.0.1 → 4.0.2 での変更点</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ver-4-0-0-4-0-1">6.18. ver 4.0.0 → 4.0.1 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id43">6.18.1. オブジェクトストレージ: 論理削除オブジェクトの自動定期削除機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apns-push">6.18.2. APNs Push</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ver-3-0-0-4-0-0">6.19. ver 3.0.0 → 4.0.0 での変更点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#java-8">6.19.1. Java 8 への移行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tomcat">6.19.2. Tomcat バージョンの更新</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">6.19.3. マイグレーション手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">6.19.4. 設定ファイルフォーマットの変更</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">6.19.5. 準拠する REST API の改訂</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sse-push">6.19.6. SSE Push 機能追加</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">6.19.7. デベロッパコンソール機能の変更</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Server User Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>6. マイグレーションガイド</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>6. マイグレーションガイド<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>本章では、モバイルバックエンド基盤サーバの以前のバージョンからの
変更点や移行方法について説明します。</p>
<div class="section" id="ver-7-0-3-ver-7-0-4">
<h2>6.1. ver 7.0.3 → ver 7.0.4 での変更点<a class="headerlink" href="#ver-7-0-3-ver-7-0-4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id2">
<h3>6.1.1. デベロッパーコンソールサーバ<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の不具合修正を行いました。</p>
<ul class="simple">
<li>オブジェクト数が非常に多い場合、オブジェクト表示ページ総数がずれることがある</li>
<li>IE11からファイルのアップロードが失敗する場合がある</li>
</ul>
</div>
</div>
<div class="section" id="ver-7-0-2-7-0-3">
<h2>6.2. ver 7.0.2 → 7.0.3 での変更点<a class="headerlink" href="#ver-7-0-2-7-0-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下の機能を追加しました。</p>
<ul class="simple">
<li>MongoDB サーバ接続に Connection URI が利用可能になりました。詳細は <a class="reference internal" href="configure/config_file.html#mongodb-config"><span class="std std-ref">MongoDB設定</span></a> を参照ください。</li>
</ul>
</div>
<div class="section" id="ver-7-0-0-7-0-2">
<h2>6.3. ver 7.0.0 → 7.0.2 での変更点<a class="headerlink" href="#ver-7-0-0-7-0-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下の機能を追加しました。</p>
<ul class="simple">
<li>APIGW(HTTP) リクエスト再送機能を追加</li>
<li>ログ表示の逆順表示機能追加</li>
</ul>
</div>
<div class="section" id="ver-6-5-3-6-5-4">
<h2>6.4. ver 6.5.3 → 6.5.4 での変更点<a class="headerlink" href="#ver-6-5-3-6-5-4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id3">
<h3>6.4.1. デベロッパーコンソールサーバ<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の機能を追加しました。</p>
<ul class="simple">
<li>ログ表示の逆順表示機能追加</li>
</ul>
</div>
</div>
<div class="section" id="ver-6-5-x-7-0-0">
<h2>6.5. ver 6.5.x → 7.0.0 での変更点<a class="headerlink" href="#ver-6-5-x-7-0-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id4">
<h3>6.5.1. ライセンス認証<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ライセンス認証が追加されました。
ライセンスキーが設定されていないと BaaS サーバが正常に動作しません。</p>
<p>ライセンスキーの投入手順は <a class="reference internal" href="usage/license_auth.html#license-auth"><span class="std std-ref">ライセンス認証</span></a> を参照してください。</p>
</div>
<div class="section" id="id5">
<h3>6.5.2. オブジェクトストレージ強化<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>MongoDB の Aggregation Framework、および Extended JSON 表記に対応しました。
詳細は <a class="reference external" href="../developer/functions/object_storage.html">オブジェクトストレージ</a> をご参照ください。</p>
</div>
<div class="section" id="openid-connect">
<h3>6.5.3. OpenID Connect認証 アカウントリンク対応<a class="headerlink" href="#openid-connect" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenID Connect認証 アカウントリンクに対応しました。
詳細は <a class="reference external" href="../auth/oidc/account_link.html">アカウントリンク情報の設定、取得、削除</a> を参照してください。</p>
</div>
</div>
<div class="section" id="ver-6-5-2-6-5-3">
<h2>6.6. ver 6.5.2 → 6.5.3 での変更点<a class="headerlink" href="#ver-6-5-2-6-5-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="api">
<h3>6.6.1. APIサーバ<a class="headerlink" href="#api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の不具合修正を行いました。サーババージョンは v6.5.3 となります。</p>
<ul class="simple">
<li>API Gateway (HTTP) クエリストリングに使用できない文字がある</li>
</ul>
</div>
</div>
<div class="section" id="ver-6-5-1-6-5-2">
<h2>6.7. ver 6.5.1 → 6.5.2 での変更点<a class="headerlink" href="#ver-6-5-1-6-5-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id8">
<h3>6.7.1. APIサーバ<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の不具合修正を行いました。サーババージョンは v6.5.2 となります。</p>
<ul class="simple">
<li>SSE Push 送信先が 4096 個を超えると送信エラーになる</li>
<li>オブジェクトストレージ: 部分更新で一部の演算子を使うと、update権限のみでACLを変更できてしまう</li>
<li>ファイルストレージ: ファイル名に日本語が含まれるときに、Content-Disposition ヘッダのファイル名が文字化けする</li>
<li>ファイルストレージ: メモリ不足が原因で、AWS S3 に対する大容量ファイルアップロードが失敗することがある</li>
</ul>
</div>
</div>
<div class="section" id="ver-6-5-0-ver-6-5-1">
<h2>6.8. ver 6.5.0 → ver 6.5.1 での変更点<a class="headerlink" href="#ver-6-5-0-ver-6-5-1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id9">
<h3>6.8.1. APIサーバ<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>MongoDB 最大コネクション数のデフォルト値を 2000 から 200 に変更</li>
<li>テナント名に使用できる文字制約を追加 (先頭は英数字のみ、24文字hex文字列使用不可)</li>
<li>サーバログ改善: (ログイン成功時にセッショントークンの一部を出力)</li>
</ul>
</div>
</div>
<div class="section" id="ver-6-0-3-6-5-0">
<h2>6.9. ver 6.0.3 → 6.5.0 での変更点<a class="headerlink" href="#ver-6-0-3-6-5-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="rest-api">
<h3>6.9.1. 準拠する REST API の改訂<a class="headerlink" href="#rest-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>準拠する REST API が v6.5.0 に改訂されました。</p>
<p>REST API v6.0.0 に対して上位互換となっています。</p>
</div>
<div class="section" id="saml">
<h3>6.9.2. SAML 認証機能追加<a class="headerlink" href="#saml" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>SAML認証によるユーザ認証に対応しました。
詳細は <a class="reference external" href="../auth/saml/index.html">ADFS/SAML認証</a> を参照してください。</p>
</div>
<div class="section" id="id10">
<h3>6.9.3. OpenID Connect認証機能追加<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenID Connect認証によるユーザ認証に対応しました。
詳細は <a class="reference external" href="../auth/oidc/index.html">OpenID Connect 認証</a> を参照してください。</p>
</div>
<div class="section" id="id12">
<h3>6.9.4. クライアント証明書認証機能追加<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>クライアント証明書認証によるユーザ認証に対応しました。
クライアント証明書認証を使用する場合は、BaaSサーバ以外にHAProxyなどのリバースプロキシが必要になります。</p>
<p>詳細は <a class="reference external" href="../auth/clientcert/index.html">クライアント証明書認証</a> を参照してください。</p>
</div>
<div class="section" id="ldap">
<h3>6.9.5. LDAPグループ連携機能追加<a class="headerlink" href="#ldap" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ActiveDirectory 利用時にユーザの所属グループを自動的にBaaSサーバ側に転送する機能を追加しました。</p>
<p>詳細は、<a class="reference external" href="../auth/index.html">認証機能ガイド</a>　の「LDAP/ActiveDirectory連携」⇒「グループ情報の自動連携」を参照してください。</p>
</div>
<div class="section" id="id15">
<h3>6.9.6. ローカルユーザ・外部認証ユーザ混在対応<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>LDAP, SAML, OAuth/OpenID Connect などの外部認証連携利用時でも、該当テナント内でローカル認証を同時に使用できるようになりました。
具体的には外部認証連携時でも、ローカルユーザのサインアップ・ログインなどの REST API を利用可能です。</p>
</div>
<div class="section" id="id16">
<h3>6.9.7. ファイルストレージ強化<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>S3互換オブジェクトストレージ対応<ul>
<li>ファイルストレージの保存先に S3 互換オブジェクトストレージを利用できるようになりました
(従来は MongoDB にファイルを保存)。</li>
<li>詳細は、<a class="reference external" href="../devconsole/tenant/tenant_config_storage.html">デベロッパーコンソール利用ガイドの「テナント設定 - 外部ストレージ設定」</a> の章を参照してください。</li>
</ul>
</li>
<li>ユーザ定義メタ情報の付与機能を追加<ul>
<li>ファイルのメタデータにユーザが定義したJSON形式のメタ情報
(例えば、ファイルバージョン・作成者情報など)を付与できるようになりました。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="api-gateway">
<h3>6.9.8. API Gateway<a class="headerlink" href="#api-gateway" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>API Gateway に機能強化を行っています。
詳細は <a class="reference external" href="../apigw/migration.html">API Gateway 利用手順書「マイグレーションガイド」</a> を参照してください。</p>
</div>
<div class="section" id="id19">
<h3>6.9.9. セキュリティ強化<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ユーザ登録・更新時に E-mail を使用した本人確認・通知を行う機能を追加しました。</p>
<ul class="simple">
<li>本人確認機能を有効にすると、ユーザ登録・更新時にユーザ宛てに E-mail が送信され、記載した URLにブラウザでアクセスすることで確認を行うことができます。</li>
<li>また、通知機能を有効にすると、ユーザ宛てに通知メールが送信されるようになります。</li>
</ul>
<p>設定方法は <a class="reference external" href="../devconsole/index.html">デベロッパーコンソール利用ガイド</a> ⇒ 「テナントの管理」
⇒ 「テナント設定 - 基本設定」を参照してください。</p>
<p>また、マスターキーを変更する機能を追加しました。
デベロッパーコンソールのアプリ編集画面でマスターキーを変更することができます。</p>
</div>
<div class="section" id="id21">
<h3>6.9.10. デベロッパーコンソール強化<a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の機能を追加しました。</p>
<ul class="simple">
<li>API Gateway / Cloud Function の編集機能</li>
<li>ファイルバケット内のファイル操作機能</li>
<li>メールなどのテンプレート編集機能</li>
<li>テナント管理画面の改善</li>
<li>グループの所属メンバ編集機能</li>
<li>API統計(メータリング)グラフ表示機能</li>
</ul>
</div>
<div class="section" id="id22">
<h3>6.9.11. 設定項目改善<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>RabbitMQ クラスタに接続するための設定項目を追加しました。また、RabbitMQ 接続設定はデベロッパーコンソールからも指定できるようになりました。</li>
<li>MongoDBサーバに接続する際のコネクション数を指定できるようになりました。</li>
<li>ファイルストレージを利用する際のファイル1つあたりの最大サイズを指定できるようになりました。なお、AWS S3 を利用する場合、本設定を適用せず、AWS S3 の上限までファイルデータを格納できます。</li>
<li>各設定項目は環境変数で指定することができるようになりました。</li>
</ul>
<p>詳細は <a class="reference internal" href="configure/config_file.html#configuration-file"><span class="std std-ref">設定ファイル</span></a> を参照してください。</p>
</div>
<div class="section" id="id23">
<h3>6.9.12. サーバ管理ツール強化<a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>YAML形式の import/export サポート</li>
<li>テナントの項目追加（パスワードポリシー、MongoDB 個別接続設定、レートリミット設定、本人確認とアカウントロック関連の設定など）</li>
<li>外部ストレージ設定の import/export サポート</li>
<li>ファイルバケットの項目追加（バケットの外部ストレージ設定）</li>
</ul>
<p>詳細は <a class="reference internal" href="extended/clitool.html#clitool"><span class="std std-ref">コマンドラインツール</span></a> を参照してください。</p>
</div>
<div class="section" id="apns-alpn-boot">
<h3>6.9.13. APNs 利用時の ALPN Boot 不要化<a class="headerlink" href="#apns-alpn-boot" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>APNs (iOS Push) を使用する際に ALPN Boot を Tomcat に設定する必要が無くなりました。
詳細は <a class="reference internal" href="configure/configure.html#config-alpn"><span class="std std-ref">ALPN 設定</span></a> を参照してください。</p>
</div>
</div>
<div class="section" id="ver-6-0-2-6-0-3">
<h2>6.10. ver 6.0.2 → 6.0.3 での変更点<a class="headerlink" href="#ver-6-0-2-6-0-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id24">
<h3>6.10.1. APIサーバ/デベロッパーコンソールサーバ<a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>マルチテナントに関連するセキュリティ上の不具合を修正しました。</p>
<ul class="simple">
<li>APIサーバ: マスターキーで別テナントのユーザを操作できてしまう (#6588)</li>
<li>デベロッパーコンソールサーバ: 別テナントのアプリ情報が見えてしまう (#6590)</li>
</ul>
<p>機能面での変更はありません。</p>
</div>
</div>
<div class="section" id="ver-6-0-0-6-0-2">
<h2>6.11. ver 6.0.0 → 6.0.2 での変更点<a class="headerlink" href="#ver-6-0-0-6-0-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id25">
<h3>6.11.1. API サーバ<a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の不具合を修正しました。</p>
<ul class="simple">
<li>パスワードリセットページに、不要なフィールド(現パスワード入力)がある</li>
<li>API Gateway: HTTP Proxy レスポンスが空のときにエラーになる</li>
</ul>
</div>
<div class="section" id="id26">
<h3>6.11.2. デベロッパーコンソールサーバ<a class="headerlink" href="#id26" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の不具合を修正しました。</p>
<ul class="simple">
<li>デベロッパーコンソール: オブジェクト検索結果画面でページ切り替えができない</li>
</ul>
</div>
</div>
<div class="section" id="ver-5-0-2-6-0-0">
<h2>6.12. ver 5.0.2 → 6.0.0 での変更点<a class="headerlink" href="#ver-5-0-2-6-0-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id27">
<h3>6.12.1. 準拠する REST API の改訂<a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>準拠する REST API が v6.0.0 に改訂されました。</p>
<p>REST API v5 に対して上位互換となっています。</p>
</div>
<div class="section" id="id28">
<h3>6.12.2. 設定ファイル変更<a class="headerlink" href="#id28" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>設定ファイル(XML)より、以下の項目が削除されました。</p>
<ul class="simple">
<li>メール関連設定 : SMTPサーバホスト名・ポート番号、SMTP認証ユーザ・パスワード、Fromアドレス</li>
<li>デベロッパーコンソール: ベースURL, ヘルプURL</li>
<li>SSE Push サーバ URI</li>
</ul>
<p>これらの値のほとんどはデベロッパーコンソールの <a class="reference external" href="../devconsole/system/system_config.html">システム設定</a> で行うように変更されました。</p>
<p>設定ファイルの詳細は <a class="reference internal" href="configure/config_file.html#configuration-file"><span class="std std-ref">設定ファイル</span></a> を参照してください。</p>
</div>
<div class="section" id="api-gateway-http-proxy">
<h3>6.12.3. API Gateway (HTTP Proxy) の仕様変更<a class="headerlink" href="#api-gateway-http-proxy" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>API Gateway (HTTP Proxy) の Swagger 記述フォーマットに変更があります。
具体的には、レスポンスマッピング(ステータスコードのマッピング)の記述方法が変更になっています。</p>
<p>詳細は API Gateway 利用手順書の <a class="reference external" href="../apigw/mapping.html">レスポンスマッピング</a> を参照してください。</p>
</div>
<div class="section" id="id31">
<h3>6.12.4. 初期システム管理者アカウントの自動追加<a class="headerlink" href="#id31" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>システムインストール後、初回デベロッパーコンソールにアクセスする際、
初期システム管理アカウントが自動的に作成されるようになりました。
(コマンドラインツールでアカウントを手動追加している場合は自動追加は実施されません)</p>
<p>詳細は <a class="reference internal" href="usage/devconsole.html#initial-login"><span class="std std-ref">初回ログイン</span></a> を参照してください。</p>
</div>
</div>
<div class="section" id="ver-5-0-1-5-0-2">
<h2>6.13. ver 5.0.1 → 5.0.2 での変更点<a class="headerlink" href="#ver-5-0-1-5-0-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下の不具合を修正しました。</p>
<ul class="simple">
<li>オブジェクトストレージ: クエリ結果に Long 値が入っている場合、$numberLong フィールド内に格納されてしまう</li>
<li>SSE Push : RabbitMQ 接続が失敗しても SSE Push の register/unregiter がエラーにならない</li>
<li>デベロッパーコンソール: Push受信可能グループに g:anonymous などを指定すると黒画面(エラー)になってしまう</li>
</ul>
</div>
<div class="section" id="ver-5-0-0-5-0-1">
<h2>6.14. ver 5.0.0 → 5.0.1 での変更点<a class="headerlink" href="#ver-5-0-0-5-0-1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="cors-access-control-allow-credential">
<h3>6.14.1. CORS Access-Control-Allow-Credential ヘッダ許可設定追加<a class="headerlink" href="#cors-access-control-allow-credential" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Access-Control-Allow-Credential ヘッダの送信許可設定を追加しました。</p>
<p>詳細はデベロッパーコンソール利用ガイドの
<a class="reference external" href="../devconsole/tenant/tenant_config_basic.html">テナント設定</a> を参照ください。</p>
</div>
<div class="section" id="id33">
<h3>6.14.2. 不具合修正<a class="headerlink" href="#id33" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>API Gateway (HTTP Proxy) において、chunked encoding されたレスポンスを正常に Proxy できない問題を修正しました。</p>
</div>
</div>
<div class="section" id="ver-4-0-3-5-0-0">
<h2>6.15. ver 4.0.3 → 5.0.0 での変更点<a class="headerlink" href="#ver-4-0-3-5-0-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id34">
<h3>6.15.1. 設定ファイル変更<a class="headerlink" href="#id34" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>ssePush.internalAmqpUri 設定は削除されました。代わりに amqp.uri 設定を使用してください。</li>
<li>console.allowSelfSignup 設定は削除されました。デベロッパーコンソールの「システム設定」より設定変更ができるようになっています。</li>
<li>system.noChargeKey 設定が追加されました。Cloud Functions を使用する場合は設定が必要です。</li>
<li>api.internalBaseUrl 設定が追加されました。Cloud Function を使用する場合は設定が必要です。</li>
</ul>
<p>詳細は <a class="reference internal" href="configure/config_file.html#configuration-file"><span class="std std-ref">設定ファイル</span></a> を参照してください。</p>
</div>
<div class="section" id="api-gateway-cloud-functions">
<h3>6.15.2. API Gateway / Cloud Functions機能追加<a class="headerlink" href="#api-gateway-cloud-functions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>API Gateway / Cloud Functions 機能に対応しました。</p>
<p>Cloud Functions機能を使用するためには Cloud Functionsサーバのインストールが必要です。
詳細は <a class="reference external" href="../cloudfunctions-server/index.html">Cloud Functionsサーバ利用手順書</a> をご参照ください。</p>
</div>
<div class="section" id="id35">
<h3>6.15.3. ログ閲覧機能追加<a class="headerlink" href="#id35" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>デベロッパーコンソールにシステムログ・Cloud Functionsログを閲覧する機能を追加しました。</p>
<p>なお、本機能を使用する場合は fluentd の設定が必要です。
詳細は <a class="reference internal" href="configure/fluentd.html#use-fluentd"><span class="std std-ref">fluentd を利用したロギング</span></a> を参照してください。</p>
</div>
<div class="section" id="id36">
<h3>6.15.4. APIレートリミット(スロットリング)機能追加<a class="headerlink" href="#id36" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>REST API の発行数を制限するレートリミット(スロットリング)機能を追加しました。</p>
<p>設定方法については <a class="reference external" href="../devconsole/index.html">デベロッパーコンソール利用ガイド</a> の「レートリミット」の章をご参照ください。</p>
</div>
<div class="section" id="id38">
<h3>6.15.5. パスワードポリシ・ロックポリシの強化・設定変更機能追加<a class="headerlink" href="#id38" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>パスワードポリシ・アカウントロックポリシを強化し、また設定値をテナント毎に変更する機能を追加しました。</p>
<p>設定方法については <a class="reference external" href="../devconsole/index.html">デベロッパーコンソール利用ガイド</a> の「テナント設定」の章をご参照ください。</p>
</div>
<div class="section" id="db">
<h3>6.15.6. テナント毎のDBクラスタ切り替え機能追加<a class="headerlink" href="#db" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>テナント単位で DB クラスタを切り替える機能を追加しました。
詳細は <a class="reference internal" href="extended/mongodb_cluster.html#tenant-db-cluster"><span class="std std-ref">テナント単位の MongoDB クラスタ切り替え</span></a> を参照してください。</p>
</div>
<div class="section" id="mongodb">
<h3>6.15.7. オブジェクトストレージ MongoDB クエリタイムアウト設定の追加<a class="headerlink" href="#mongodb" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>オブジェクトストレージから MongoDB にクエリを行う際のデフォルトタイムアウト値
(MongoDBサーバ側のタイムアウト値)をデベロッパーコンソールから指定できます。</p>
<p>詳細はデベロッパーコンソール利用ガイドの <a class="reference external" href="../devconsole/system/system_config.html">システム設定</a> を参照してください。</p>
</div>
<div class="section" id="id41">
<h3>6.15.8. オブジェクトストレージ クエリプランナ実行機能の追加<a class="headerlink" href="#id41" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>オブジェクトストレージに対するクエリプランナの実行機能をデベロッパーコンソールに追加しました。</p>
<p>詳細はデベロッパーコンソール利用ガイドの <a class="reference external" href="../devconsole/tenant/object.html">オブジェクトバケット管理</a> → クエリプランナー を参照してください。</p>
</div>
</div>
<div class="section" id="ver-4-0-2-4-0-3">
<h2>6.16. ver 4.0.2 → 4.0.3 での変更点<a class="headerlink" href="#ver-4-0-2-4-0-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下の不具合修正を行いました。</p>
<ul class="simple">
<li>オブジェクトストレージ: $or 条件を指定してクエリを実施すると、アクセス権限がないオブジェクトにアクセスできてしまう。</li>
<li>mongos を2台指定することができない(起動時エラーになる)</li>
</ul>
<p>機能面での変更はありません。</p>
</div>
<div class="section" id="ver-4-0-1-4-0-2">
<h2>6.17. ver 4.0.1 → 4.0.2 での変更点<a class="headerlink" href="#ver-4-0-1-4-0-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下の不具合修正を行いました。</p>
<ul class="simple">
<li>オブジェクト数やユーザ数が非常に多い場合、デベロッパーコンソールで
オブジェクト・ユーザ一覧を表示した際にメモリ不足でサーバが落ちる問題を修正。</li>
</ul>
<p>機能面での変更はありません。</p>
</div>
<div class="section" id="ver-4-0-0-4-0-1">
<h2>6.18. ver 4.0.0 → 4.0.1 での変更点<a class="headerlink" href="#ver-4-0-0-4-0-1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id43">
<h3>6.18.1. オブジェクトストレージ: 論理削除オブジェクトの自動定期削除機能追加<a class="headerlink" href="#id43" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>論理削除状態のオブジェクトを自動的に定期削除する機能を追加しました。</p>
<ul class="simple">
<li>テナントごとに、論理削除状態オブジェクトの有効期限を指定します。設定は、デベロッパーコンソールの「テナント設定」から行ってください。</li>
<li>デフォルト状態では、自動定期削除は行わない設定となっています。</li>
<li>定期削除機能は、APIサーバ上で1時間に1回の間隔で自動実行されます。</li>
</ul>
</div>
<div class="section" id="apns-push">
<h3>6.18.2. APNs Push<a class="headerlink" href="#apns-push" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>APNs Push サーバとの通信プロトコルを最新の APNs Provider API (HTTP/2) 方式に変更しました。<ul>
<li>Tomcat に ALPN 設定を行う必要があります。詳細は <a class="reference internal" href="configure/configure.html#config-alpn"><span class="std std-ref">ALPN 設定</span></a> を参照してください。</li>
<li>クライアント側への影響はありません。</li>
</ul>
</li>
<li>デベロッパーコンソールでの APNs Push 証明書時に、Development, Production を手動選択するように変更しました。</li>
</ul>
</div>
</div>
<div class="section" id="ver-3-0-0-4-0-0">
<h2>6.19. ver 3.0.0 → 4.0.0 での変更点<a class="headerlink" href="#ver-3-0-0-4-0-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="java-8">
<h3>6.19.1. Java 8 への移行<a class="headerlink" href="#java-8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>動作には JDK 8 以上が必須となりましたので、JDK 7 では起動しません。
JDK 7 をお使いの場合は JDK 8 への移行が必要です。</p>
</div>
<div class="section" id="tomcat">
<h3>6.19.2. Tomcat バージョンの更新<a class="headerlink" href="#tomcat" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>必要な Tomcat のバージョンが 8.0.32 以上に変更になりました。
Tomcat 7.0.68 以上でも動作可能ですが、保証範囲外となります。</p>
<p>これより古いバージョンでは一部動作不具合が発生する可能性があります。
またセキュリティ脆弱性も報告されているため使用しないでください。</p>
</div>
<div class="section" id="id44">
<h3>6.19.3. マイグレーション手順<a class="headerlink" href="#id44" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>WARファイルを差し替えるだけでマイグレーションは完了します。</p>
<p>デベロッパーコンソール関連データベースの一部スキーマが変更されていますが、
データベースは自動的にマイグレーションされますので、特に操作は必要ありません。
ただし、ver 3.x のサーバとは混在させないようにしてください。</p>
</div>
<div class="section" id="id45">
<h3>6.19.4. 設定ファイルフォーマットの変更<a class="headerlink" href="#id45" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="configure/config_file.html#configuration-file"><span class="std std-ref">設定ファイル</span></a> （XMLファイル)の設定項目が追加・変更になっています。
適宜、修正を行ってください。</p>
<p>追加された項目は以下のとおりです。</p>
<ul class="simple">
<li>console.helpUrl: デベロッパーコンソールのヘルプURL</li>
<li>ssePush.publicUrl: SSE Push サーバ URI</li>
<li>ssePush.internalAmqpUri : SSE Push 用 AMQP Broker URI</li>
</ul>
<p>SDE Push に関連する以下の項目は削除となっています。</p>
<ul class="simple">
<li>sdePush.internalUrl</li>
<li>sdePush.publicUrl</li>
<li>sdePush.serviceId</li>
</ul>
</div>
<div class="section" id="id46">
<h3>6.19.5. 準拠する REST API の改訂<a class="headerlink" href="#id46" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>準拠する REST API が v4.0.1 に改訂されました。</p>
<p>REST API は v3 に対してほぼ後方互換性があります。
ただし、後述するとおり SDE Push 関連の API は削除されています。</p>
</div>
<div class="section" id="sse-push">
<h3>6.19.6. SSE Push 機能追加<a class="headerlink" href="#sse-push" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>SSE Push 機能を新たに追加しました。</p>
<p>これに伴い、設定ファイルの書式やセットアップ手順が変更になっていますので注意してください。
設定ファイルの詳細は <a class="reference internal" href="configure/config_file.html#configuration-file"><span class="std std-ref">設定ファイル</span></a> を参照してください。</p>
</div>
<div class="section" id="id47">
<h3>6.19.7. デベロッパコンソール機能の変更<a class="headerlink" href="#id47" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ユーザ・グループ管理機能、オブジェクトデータ参照・インポート・エクスポート機能、
運用管理者権限追加などの機能追加が行われています。</p>
<p>デベロッパーコンソールの詳細については <a class="reference external" href="../devconsole/index.html">デベロッパーコンソール利用ガイド</a> を参照してください。</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="extended/mongodb_cluster.html" class="btn btn-neutral" title="5.7. MongoDBクラスタ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2018, NEC Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'7.0.4',
            LANGUAGE:'ja',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>