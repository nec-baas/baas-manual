.. _license_auth:

===============
ライセンス認証
===============

BaaSサーバを動作させるためには「ライセンス認証」が必要になります。

BaaSサーバのライセンス認証は、サーバに「ライセンスキー」を組み込むことで行います。

.. attention::

   BaaSサーバ配布物には「通常版」と「無制限版」があります。
   無制限版についてはライセンスキーは最初から組み込まれていますので
   本章の手順は不要です。

ライセンスキー・ライセンスファイル
==================================

ライセンス情報は「ライセンスファイル」として提供されます。
ライセンスファイルは以下のような Java プロパティファイル形式の
テキストファイルです。

::

  # (コメント)
  licenseKey=.......

"licenseKey=" 以降の文字列がライセンスキーになります。
ライセンスキーには以下のような情報が記述されています
(同じ内容がライセンスファイルのコメント文中にも記載されています)

* ライセンシの名前
* ライセンス有効期限
* APIレートリミット
* テナント数・アプリ数・バケット数・ユーザ数上限
* オブジェクトストレージ・ファイルストレージ最大データサイズ

ライセンスキーの組み込み
========================

ライセンスキーの組み込みには３通りの方法があります。

1. デベロッパーコンソールから投入する
2. コマンドラインツールから投入する
3. ライセンスファイルを特定のディレクトリに格納する

どの方法を使っていただいても構いません。
なお、1/2 の方法と 3 の方法を同時に実施した場合、
1/2 の設定が優先されますのでご注意ください。

デベロッパーコンソールから投入する方法
---------------------------------------

デベロッパーコンソールにシステム管理者としてログインし、
画面上部メニューの「管理」⇒「ライセンスキー」を選択します。

ライセンスキー表示画面になりますので「編集」ボタンを押して
ライセンスファイルの内容またはライセンスキー(licenseKey=以降の文字列)
をコピー＆ペーストして保存してください。

コマンドラインツールから投入する方法
------------------------------------

baas-admin コマンドラインツールから投入する方法です。

以下のようにコマンドラインから直接ライセンスキーを投入します。

.. code-block:: bash

    $ baas-admin.sh -c setLicense --license-key [ライセンスキー]    

ライセンスファイルを特定のディレクトリに格納する方法
-----------------------------------------------------

ライセンスファイルを特定のディレクトリに格納する方法です。

ライセンスファイルを "license.properties" というファイル名で
以下のいずれかのディレクトリに格納してください。

* /etc/baas/
* c:/NEC/Baas/etc/ (Windows の場合)
* ~/.baas/

格納後は BaaS サーバの再起動が必要です。
