<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Global Type Definitions Callbacks コールバック。非同期 API 呼び出し時に使用する。 コールバックを省略(=undefined)した場合は、非同期 API は Promise を返却する。 Promise 完了時の引数は success コールバックの引数と同じ。 Type: Object Properties: Name Type Description success function 成功時に呼び出されるコールバック。 success コールバックの引数は1個。引数の内容は、各非同期 API により異なる。 error function エラー発生時に呼び出されるコールバック。 error コールバックには Object が渡される。各 API に指定がない限り、以下の形式となる。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ } × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Classes Classes AccountLink Acl BatchRequest Clause CustomApi FileBucket FileMetadata Group HttpRequest NebulaService ObjectBucket ObjectQuery PushSender ApnsFields GcmFields SseFields User Namespaces AclGroup AclPermission Nebula × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Namespaces Classes AccountLink Acl BatchRequest Clause CustomApi FileBucket FileMetadata Group HttpRequest NebulaService ObjectBucket ObjectQuery PushSender ApnsFields GcmFields SseFields User Namespaces AclGroup AclPermission Nebula × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global BaaS JavaScript SDKモバイルバックエンド基盤(BaaS) JavaScript SDK のリファレンスマニュアルです。 Nebula 名前空間すべてのクラスは、Nebula 名前空間内にあります。 Nebula 名前空間の実体は NebulaService クラスのデフォルトインスタンスです。 非同期 API について非同期型の API は、すべて callbacks 引数を持っています。 callbacks を省略(または undefined を指定)した場合は、Promise が返却されます。 Promise を使用する例を示します。 var bucket = new Nebula.ObjectBucket(&quot;bucket1&quot;); var clause = Nebula.Clause.lessThan(&quot;score&quot;, 30); var query = new Nebula.ObjectQuery().setClause(clause); bucket.query(query) .then(function(objects) { // 成功時の処理 }) .catch(function(err) { // エラー時の処理 });callbacks を指定する場合は、以下のような Object で 成功時と失敗時に呼び出される コールバックを指定します。 { success: function(data) { // 成功時の処理 }, error: function(error) { // 失敗時の処理 } }成功時は success がコールバックされます。 success の引数に渡される値は Promise の返却値と同じです。内容は API によって異なります。 失敗時は error がコールバックされます。 error の書式は、API に指定がないかぎり以下の通りとなります。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ } × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"AccountLink.html":{"id":"AccountLink.html","title":"Class: AccountLink","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: AccountLink AccountLink AccountLink クラス new AccountLink() AccountLink クラスインスタンスを生成する Since: v6.5.0 Example var link = new Nebula.AccountLink(); Members _id :string リンクユーザID Type: string iss :string Issuer Identifier Type: string op :string OP種別 Type: string sub :string Subject Identifier Type: string × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"Acl.html":{"id":"Acl.html","title":"Class: Acl","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: Acl Acl ACLクラス new Acl(json) Parameters: Name Type Description json Object JSON表記のACL。省略時は全エントリが空の状態で生成される。 Example var acl1 = new Nebula.Acl(); var acl2 = new Nebula.Acl({&quot;r&quot;: [Nebula.Acl.AUTHENTICATED]}); Members &lt;static, constant&gt; ADMIN 管理権限(admin) &lt;static, constant&gt; ANONYMOUS ログインしていないユーザを含む全ユーザ (g:anonymous) &lt;static, constant&gt; AUTHENTICATED ログイン認識した全ユーザ (g:authenticated) &lt;static, constant&gt; CREATE 作成権限(c) &lt;static, constant&gt; DELETE 削除権限(d) &lt;static, constant&gt; OWNER オーナ(owner) &lt;static, constant&gt; READ 読み込み権限(r) &lt;static, constant&gt; UPDATE 更新権限(u) &lt;static, constant&gt; WRITE 書き込み権限(w) Methods addEntry(permission, entry) 対象権限にユーザIDまたはグループ名を追加する Parameters: Name Type Description permission String エントリを追加する対象権限 以下のいずれかの値を指定する。 Acl.READ Acl.WRITE Acl.CREATE Acl.UPDATE Acl.DELETE Acl.ADMIN entry Object ユーザまたはグループ情報 以下のいずれかを指定する。 ・ユーザを指定する場合 User インスタンス ユーザIDの文字列 ・グループを指定する場合 Group インスタンス グループ名に g: を付けた文字列。(例) グループ名が GROUP_A の場合、 g:GROUP_A Acl.AUTHENTICATED : ログイン認証された全ユーザ Acl.ANONYMOUS : ログインしていないユーザを含む全ユーザ Returns: 正常追加した場合 true、 パラメータが不正の場合 false を返す Type Boolean Example var acl = new Nebula.Acl(); var user = new Nebula.User(); var group = new Group(&quot;MyGroup&quot;); .... acl.addEntry(Nebula.Acl.READ, user); acl.addEntry(Nebula.Acl.WRITE, &quot;USER_01&quot;); acl.addEntry(Nebula.Acl.CREATE, group); acl.addEntry(Nebula.Acl.UPDATE, &quot;g:GROUP_A&quot;); acl.addEntry(Nebula.Acl.DELETE, Nebula.Acl.AUTHENTICATED); getEntries(permission) 対象権限のユーザIDおよびグループ名のエントリ一覧を取得する Parameters: Name Type Description permission String 取得するエントリ一覧の対象権限 以下のいずれかの値を指定する。 Acl.READ Acl.WRITE Acl.CREATE Acl.UPDATE Acl.DELETE Acl.ADMIN Returns: ユーザIDまたはグループ名の文字列の配列を返す。 エントリがない場合は、空配列を返す。 グループ名には、g: が先頭に付加されている。 Type Object Example var acl = ....; var entries = acl.getEntries(permission); for (var i = 0; i &lt; entries.length; i++) { entry = entries[i]; ....; } getOwner() 所有者のユーザIDを取得する Returns: ユーザIDの文字列を返す。所有者がない場合は、null を返す。 Type String Example var acl = ....; .... var userId = acl.getOwner(); removeEntry(permission, entry) 対象権限からにユーザIDまたはグループ名を削除する Parameters: Name Type Description permission String エントリを削除する対象権限 以下のいずれかの値を指定する。 Acl.READ Acl.WRITE Acl.CREATE Acl.UPDATE Acl.DELETE Acl.ADMIN entry Object ユーザまたはグループ情報。 以下のいずれかを指定する。 ・ユーザを指定する場合 User インスタンス ユーザIDの文字列 ・グループを指定する場合 Group インスタンス グループ名に g: を付けた文字列。(例) グループ名が GROUP_A の場合、 g:GROUP_A Acl.AUTHENTICATED : ログイン認証された全ユーザ Acl.ANONYMOUS : ログインしていないユーザを含む全ユーザ Example var acl = new Nebula.Acl(); var user = new Nebula.User(); var group = new Group(&quot;MyGroup&quot;); .... acl.removeEntry(Nebula.Acl.READ, user); acl.removeEntry(Nebula.Acl.WRITE, &quot;USER_01&quot;); acl.removeEntry(Nebula.Acl.CREATE, group); acl.removeEntry(Nebula.Acl.UPDATE, &quot;g:GROUP_A&quot;); acl.removeEntry(Nebula.Acl.DELETE, Nebula.Acl.AUTHENTICATED); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"AclGroup.html":{"id":"AclGroup.html","title":"Namespace: AclGroup","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Namespace: AclGroup AclGroup AclGroupの定義。 Deprecatedである。代わりに Aclのメンバを使用すること。・ Deprecated: Yes Members &lt;static&gt; ANONYMOUS 全ユーザ (g:anonymous) &lt;static&gt; AUTHENTICATED 認証ユーザ (g:authenticated) × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"AclPermission.html":{"id":"AclPermission.html","title":"Namespace: AclPermission","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Namespace: AclPermission AclPermission AclPermissionの定義。 Deprecatedである。代わりに Aclのメンバを使用すること。・ Deprecated: Yes Members &lt;static, constant&gt; ADMIN 管理権限(admin) &lt;static, constant&gt; CREATE 作成権限(c) &lt;static, constant&gt; DELETE 削除権限(d) &lt;static, constant&gt; OWNER オーナ(owner) &lt;static, constant&gt; READ 読み込み権限(r) &lt;static, constant&gt; UPDATE 更新権限(u) &lt;static, constant&gt; WRITE 書き込み権限(w) × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"BatchRequest.html":{"id":"BatchRequest.html","title":"Class: BatchRequest","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: BatchRequest BatchRequest バッチリクエスト クラス new BatchRequest() オブジェクトストレージに対するバッチリクエスト。 ObjectBucket.batch() で使用する。 Since: v4.0.0 Example var batchReq = new Nebula.BatchRequest(); Methods addDeleteRequest(object) DELETEリクエストを追加する Parameters: Name Type Description object Object 削除したいオブジェクト。 _id プロパティのみ必須。 etag プロパティが存在する場合は楽観ロック付きで削除する。 Returns: なし addInsertRequest(object) INSERTリクエストを追加する Parameters: Name Type Description object Object 追加したいオブジェクト Returns: なし addUpdateRequest(object) UPDATEリクエストを追加する Parameters: Name Type Description object Object 更新したいオブジェクト。 _id プロパティは必須。 etag プロパティが存在する場合は楽観ロック付きで更新する。 Returns: なし × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"Clause.html":{"id":"Clause.html","title":"Class: Clause","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: Clause Clause オブジェクト検索条件 クラス new Clause() Clause インスタンスを生成する Example var clause = new Nebula.Clause(); Methods &lt;static&gt; all(key, values) key の値が values で指定されたすべてを含んでいるかの条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 values Object 比較する値の配列 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var targets = [&quot;ssl&quot;, &quot;security&quot;]; var clause = Nebula.Clause.all(&quot;tags&quot;, targets); &lt;static&gt; and(clauses) 複数の条件を AND条件で結合する Parameters: Name Type Description clauses Clause AND条件をとるNebula.Clauseインスタンス 複数のインスタンスを指定できる Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause1 = Nebula.Clause.equals(&quot;name&quot;, &quot;AAA&quot;); var clause2 = Nebula.Clause.lessThan(&quot;score&quot;, 50); var clause3 = Nebula.Clause.greaterThan(&quot;score&quot;, 30); var clause = Nebula.Clause.and(clause1, clause2, clause3); &lt;static&gt; equals(key, value) (key == value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.equals(&quot;score&quot;, 80); &lt;static&gt; exist(key, value) key で示したフィールドが存在するかどうかを示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Boolean 存在を確認する場合は true、 存在しないことを確認する場合は false を指定する。 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.exist(&quot;tags&quot;, targets); &lt;static&gt; greaterThan(key, value) (key &gt; value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.greaterThan(&quot;number&quot;, 1000); &lt;static&gt; greaterThanOrEqual(key, value) (key &gt;= value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.greaterThanOrEqual(&quot;number&quot;, 1000); &lt;static&gt; in(key, values) key の値が values で指定された中に存在するかの条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 values Object 比較する値の配列 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var targets = [1000, 1003, 1005]; var clause = Nebula.Clause.in(&quot;number&quot;, targets); &lt;static&gt; lessThan(key, value) (key &lt; value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.lessThan(&quot;score&quot;, 30); &lt;static&gt; lessThanOrEqual(key, value) (key &lt;= value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.lessThanOrEqual(&quot;score&quot;, 30); &lt;static&gt; notEquals(key, value) (key != value) の条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.notEquals(&quot;name&quot;, &quot;apple&quot;); &lt;static&gt; or(clauses) 複数の条件を OR条件で結合する Parameters: Name Type Description clauses Clause OR条件をとるNebula.Clauseインスタンス 複数のインスタンスを指定できる Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause1 = Nebula.Clause.equals(&quot;name&quot;, &quot;AAA&quot;); var clause2 = Nebula.Clause.lessThan(&quot;score&quot;, 50); var clause3 = Nebula.Clause.greaterThan(&quot;score&quot;, 30); var clause = Nebula.Clause.or(clause1, clause2, clause3); &lt;static&gt; regex(key, expression, option) 正規表現による検索条件を示す Nebula.Clause インスタンスを生成する Parameters: Name Type Description key String 比較するキー名 expression String Perl互換の正規表現の条件文字列 option Object オプション option には必要に応じて以下の値を指定してもよい。(省略可能) Nebula.RegexOption.CASE_INSENSITIVITY 大文字小文字を区別しない Returns: Nebula.Clause インスタンスを返す。 Type Clause Example var clause = Nebula.Clause.regex(&quot;name&quot;, &quot;abc*&quot;); all(key, values) key の値が values で指定されたすべてを含んでいるかの条件を追加する Parameters: Name Type Description key String 比較するキー名 values Object 比較する値の配列 Returns: this Type Clause Example var targets = [&quot;ssl&quot;, &quot;security&quot;]; var clause = new Nebula.Clause().all(&quot;tags&quot;, targets); equals(key, value) (key == value) の条件を追加する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = new Nebula.Clause().equals(&quot;score&quot;, 80); exist(key, value) key で示したフィールドが存在するかどうかの条件を追加する Parameters: Name Type Description key String 比較するキー名 value Boolean 存在を確認する場合は true、 存在しないことを確認する場合は false を指定する。 Returns: this Type Clause Example var clause = new Nebula.Clause().exist(&quot;tags&quot;, targets); greaterThan(key, value) (key &gt; value) の条件を追加する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = new Nebula.Clause().greaterThan(&quot;number&quot;, 1000); greaterThanOrEqual(key, value) (key &gt;= value) の条件を追加すうｒ Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = Nebula.Clause.greaterThanOrEqual(&quot;number&quot;, 1000); in(key, values) key の値が values で指定された中に存在するかの条件を追加する Parameters: Name Type Description key String 比較するキー名 values Object 比較する値の配列 Returns: this Type Clause Example var targets = [1000, 1003, 1005]; var clause = new Nebula.Clause().in(&quot;number&quot;, targets); json() JSONで表現された条件式を取得する Returns: JSON条件式 Type Object lessThan(key, value) (key &lt; value) の条件を追加する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = new Nebula.Clause().lessThan(&quot;score&quot;, 30); lessThanOrEqual(key, value) (key &lt;= value) の条件を追加する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = new Nebula.Clause().lessThanOrEqual(&quot;score&quot;, 30); not(key) Nebula.Clause インスタンスの key の条件を反転させる Parameters: Name Type Description key String 比較するキー名 Returns: Nebula.Clause インスタンス(this)を返す。 Type Clause Example var clause = Nebula.Clause.exist(&quot;tags&quot;, targets); clause.not(&quot;tags&quot;); notEquals(key, value) (key != value) の条件を追加する Parameters: Name Type Description key String 比較するキー名 value Object 比較する値 Returns: this Type Clause Example var clause = new Nebula.Clause().notEquals(&quot;name&quot;, &quot;apple&quot;); regex(key, expression, option) 正規表現による検索条件を追加する Parameters: Name Type Description key String 比較するキー名 expression String Perl互換の正規表現の条件文字列 option Object オプション option には必要に応じて以下の値を指定してもよい。(省略可能) Nebula.RegexOption.CASE_INSENSITIVITY 大文字小文字を区別しない Returns: this Type Clause Example var clause = new Nebula.Clause().regex(&quot;name&quot;, &quot;abc*&quot;); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"CustomApi.html":{"id":"CustomApi.html","title":"Class: CustomApi","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: CustomApi CustomApi カスタムAPIクラス new CustomApi(apiname, method, subpath) カスタムAPIクラスインスタンスを生成する Parameters: Name Type Description apiname String API名 method String メソッド (GET/POST/PUT/DELETE のいずれか) subpath String サブパス。省略時は null。 Example var customApi = new Nebula.CustomApi(&quot;hello&quot;, &quot;GET&quot;, &quot;sayHello&quot;); Methods addHeader(name, value) リクエストヘッダを追加する Parameters: Name Type Description name ヘッダ名 value ヘッダ値 Returns: this Type CustomApi addQueryParam(name, value) クエリパラメータを追加する Parameters: Name Type Description name string value string Returns: Type CustomApi clearHeaders() リクエストヘッダをクリアする (Content-Type を除く) Returns: this Type CustomApi execute(data, callbacks) カスタムAPIの呼び出し Parameters: Name Type Description data Object API呼び出しデータ callbacks Callbacks 応答コールバック ・メソッドが GET/DELETE の場合、データはクエリパラメータに追加格納される。 メソッドが POST/PUT の場合、データはボディに JSON 形式で格納される。 ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通り。 success(response) response : サーバ応答データ。テキストデータの場合は文字列(JSONの場合でも)。 ファイルの場合は Blob または Buffer オブジェクト。 レスポンスヘッダ受信設定をしている場合は、オブジェクトが返却され、 body にサーバ応答データ、headers にヘッダが格納される。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise setBinaryResponse() Returns: this Type CustomApi setContentType(contentType) リクエスト Content-Type を指定する Parameters: Name Type Description contentType Content-Type Returns: this Type CustomApi setReceiveResponseHeaders(receive) レスポンスヘッダ受信設定を行う(Node.jsのみ)。 true に設定すると、execute 成功時の応答は {body: ..., headers: {...}, status: statusCode} 形式となる。 ブラウザ(XHR)の場合は、headers は文字列(全ヘッダ連結したもの)、 Node.js の場合は headers はヘッダ名をキーとした Object となる。 Parameters: Name Type Description receive true の場合はレスポンスヘッダを受信する × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"FileBucket.html":{"id":"FileBucket.html","title":"Class: FileBucket","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: FileBucket FileBucket ファイルバケット new FileBucket(name) FileBucket インスタンスを生成する Parameters: Name Type Description name バケット名 Example var bucket = new Nebula.FileBucket(&quot;bucket1&quot;); Methods &lt;static&gt; getBucketList(callbacks) ファイルバケットのバケット名一覧を取得する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucketList) bucketList : ファイルバケット名の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example callbacks = { success: function(bucketList) {....}, error: function(error) {....} }; Nebula.FileBucket.getBucketList(callbacks); &lt;static&gt; loadBucket(name, callbacks) ファイルバケットを取得する Parameters: Name Type Description name String ファイルバケット名 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.FileBucketインスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : ファイルバケット名(nameに同じ) } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example callbacks = { success: function(bucket) {....}, error: function(err) {....} }; Nebula.FileBucket.loadBucket(callbacks); &lt;static&gt; selectDirectory(callbacks) ディレクトリを選択する(SDE4SD). 本APIはオフライン(SDE4SD)のみで利用可能 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(dir) dir : 選択したディレクトリへのパス(文字列) Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var callbacks = { success: function(dir) {....}, error: function(err) {....} }; Nebula.FileBucket.selectDirectory(callbacks); &lt;static&gt; selectUploadFile(callbacks) アップロードするファイルを選択する(SDE4SD). 本APIはオフライン(SDE4SD)のみで利用可能 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(fileInfo) fileInfo : 選択したファイル情報(以下のJSON形式) { &quot;path&quot; : &quot;ファイルのパス情報&quot;, &quot;name&quot; : &quot;ファイル名&quot;, &quot;type&quot; : &quot;コンテンツタイプ&quot; } ※ コンテンツタイプを特定できない場合は空白 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var callbacks = { success: function(fileInfo) {....}, error: function(err) {....} }; Nebula.FileBucket.selectUploadFile(callbacks); delete() ファイルバケットからファイルを削除する(Deprecated) Deprecated: since v4.0.1 Example ・本APIは Deprecated である。remove() を使用すること。 deleteBucket(callbacks) ファイルバケットを削除する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.FileBucket インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : Nebula.FileBucket インスタンス } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.FileBucket(&quot;Person&quot;); .... callbacks = { success: function(bucket) {....}, error: function(err) {....} }; bucket.deleteBucket(callbacks); downloadFile(fileName, filePath, callbacks) ファイルをダウンロードする (SDE4SD). 本APIはオフライン(SDE4SD)のみで利用可能 Parameters: Name Type Description fileName String ファイルバケットからダウンロードするファイルの名前 filePath String ダウンロードするファイルの保存先(ファイル名を含む絶対パス) callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(fileName) fileName : ダウンロードが完了したファイル名 ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(fileName) {....}, error: function(err) {....} }; bucket.download(&quot;MyFile.jpg&quot;, &quot;/sdcard/MyFile.jpg&quot;, callbacks); getAcl() ファイルバケットのACLを取得する. ファイルバケットのACLを取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある Returns: ファイルバケットのACL Type Acl Example var bucket = ....; .... var acl = bucket.getAcl(); getBucketName() ファイルバケット名を取得する Returns: ファイルバケット名 Type String Example var bucket = ....; .... var bucketName = bucket.getBucketName(); getContentAcl() ファイルバケットのコンテンツACLを取得する. ファイルバケットのコンテンツACLを取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある Returns: ファイルバケットのコンテンツACL Type Acl Example var bucket = ....; .... var acl = bucket.getAcl(); getDescription() ファイルバケットの「説明文」を取得する. ファイルバケットのコンテンツACLを取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある Returns: ファイルバケットの「説明文」 Type String Example var bucket = ....; .... var description = bucket.getDescription(); getList(callbacks) ファイルバケットからファイル一覧を取得する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : ファイルのメタデータ(Nebula.FileMetadataインスタンス)の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.getList(callbacks); getMetadata(fileName, callbacks) ファイルバケットから指定されたファイルのメタデータを取得する Parameters: Name Type Description fileName String メタデータを取得するファイルの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : ファイルのメタデータ(Nebula.FileMetadataインスタンス) ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.getMetadata(&quot;MyFile.jpg&quot;, callbacks); getPublishedList(callbacks) ファイルバケットから公開ファイル一覧を取得する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : ファイルのメタデータ(Nebula.FileMetadataインスタンス)の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.getPublishedList(callbacks); load(fileName, callbacks) ファイルバケットからファイルを読み込む. HTML5 File APIに対応しているブラウザ、または Node.js のみで実行可能。 Parameters: Name Type Description fileName String ファイルバケットから読み込むファイルの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(data) data : ファイルの内容が格納されたBlobオブジェクト (node.js の場合は Buffer オブジェクト) ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(blob) {....}, error: function(err) {....} }; bucket.load(&quot;MyFile.jpg&quot;, callbacks); publish(fileName, callbacks) ファイルバケットのファイルを公開する. 既に公開されたファイルを再公開しても公開 URL は変更されない。 Parameters: Name Type Description fileName String 公開するファイルの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : このファイルのメタデータ ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.publish(&quot;MyFile.jpg&quot;, callbacks); remove(fileName, callbacks) ファイルバケットからファイルを削除する. Parameters: Name Type Description fileName String ファイルバケットから削除するファイルの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(fileName) fileName : 引数で指定されたfileNameと同じ ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Since: v4.0.1 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(fileName) {....}, error: function(err) {....} }; bucket.remove(&quot;fileName&quot;, callbacks); save(fileName, data, callbacks) ファイルバケットのファイルを保存する. HTML5 File APIに対応しているブラウザ、または Node.js のみで実行可能。 Parameters: Name Type Description fileName String ファイルバケットへ保存するファイル名 data Object 文字列、File/Blobオブジェクト、または Buffer オブジェクト サーバに保存するファイルのデータを以下のいずれかで指定する。 ・保存するファイルにバインドされたFileオブジェクト ・保存するファイルのデータ。文字列/Blobオブジェクト/Bufferオブジェクトのいずれか。 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : Nebula.FileMetadata インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var file = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.save(&quot;MyFileName.jpg&quot;, file, callbacks); saveAs(fileName, data, metadata, callbacks) ファイルバケットへファイルを新規保存する. HTML5 File APIに対応しているブラウザ、もしくは Node.js のみで実行可能。 Parameters: Name Type Description fileName String ファイルバケットへ保存するファイル名 data Object 文字列、File/Blobオブジェクト、または Buffer オブジェクト サーバに保存するファイルのデータを以下のいずれかで指定する。 ・保存するファイルにバインドされたFileオブジェクト ・保存するファイルのデータ。文字列/Blobオブジェクト/Bufferオブジェクトのいずれか。 metadata FileMetadata 保存するファイルのメタデータ 指定できるメタデータは以下の通りである。(他のメタデータは参照されない) ・ACL (オプション、省略可) ・コンテンツタイプ (必須、省略不可) callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : Nebula.FileMetadata インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var file = ....; .... var meta = new Nebula.FileMetadata(); meta.setContentType(&quot;image/jpeg&quot;); callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.saveAs(&quot;MyFileName.jpg&quot;, file, meta, callbacks); saveBucket(callbacks) ファイルバケットを保存する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.FileBucket インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ &quot;data&quot; : Nebula.FileBucket インスタンス } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.FileBucket(&quot;Person&quot;); .... callbacks = { success: function(bucket) {....}, error: function(err) {....} }; bucket.saveBucket(callbacks); setAcl(acl) ファイルバケットのACLを設定する. 本メソッドを呼び出しただけでは、サーバに格納されているファイルバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description acl Acl Aclインスタンス Returns: this Type FileBucket Example var bucket = ....; var acl = new Nebula.Acl(); .... acl.addEntry(....); .... bucket.setAcl(acl); setContentAcl(acl) ファイルバケットのコンテンツACLを設定する. 本メソッドを呼び出しただけでは、サーバに格納されているファイルバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description acl Acl Nebula.ACL のインスタンス Returns: this Type FileBucket Example var bucket = ....; var acl = new Nebula.Acl(); .... acl.addEntry(....); .... bucket.setContentAcl(acl); setDescription(description) ファイルバケットに「説明文」を設定する. 本メソッドを呼び出しただけでは、サーバに格納されているファイルバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description description String 設定する「説明文」 Returns: this Type FileBucket Example var bucket = ....; var acl = new Nebula.Acl(); .... acl.addEntry(....); .... bucket.setDescription(&quot;このバケットの説明文”); unpublish(fileName, callbacks) ファイルバケットのファイルを非公開する Parameters: Name Type Description fileName String 非公開にするファイルの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : このファイルのメタデータ ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.unpublish(&quot;MyFile.jpg&quot;, callbacks); updateMetadata(fileName, metadata, callbacks) ファイルバケットの指定されたファイルのメタデータを更新する Parameters: Name Type Description fileName String メタデータを更新するファイルの名前 metadata FileMetadata 更新メタデータ callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : ファイルのメタデータ(Nebula.FileMetadataインスタンス) ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var meta = ....; .... callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.updateMetadata(&quot;MyFile.jpg&quot;, meta, callbacks); uploadNewFile(fileName, filePath, metadata, callbacks) ファイルを新規アップロードする(SDE4SD). 本APIはオフライン(SDE4SD)のみで利用可能 Parameters: Name Type Description fileName String ファイルバケットへ保存するファイル名 filePath String 保存する元ファイルの絶対パス(ファイル名含む) metadata FileMetadata 保存するファイルのメタデータ 指定できるメタデータは以下の通りである。(他のメタデータは参照されない) ・ACL (オプション、省略可) ・コンテンツタイプ (必須、省略不可) ・キャッシュフラグ (必須、省略不可) callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : Nebula.FileMetadata インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; Nebula.FileBucket.selectUploadFile({ success: function(fileInfo) { var meta = new Nebula.FileMetadata(); meta.setContentType(fileInfo.type); meta.setCacheDisabled(false); var callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.uploadNewFile(fileInfo.name, fileInfo.path, meta, callbacks); }, error: function(err) {....} }); uploadUpdateFile(fileName, filePath, metadata, callbacks) ファイルを更新アップロードする(SDE4SD). 本APIはオフライン(SDE4SD)のみで利用可能 Parameters: Name Type Description fileName String ファイルバケットへ保存するファイル名 filePath String 保存する元ファイルの絶対パス(ファイル名含む) metadata FileMetadata 保存するファイルのメタデータ 指定できるメタデータは以下の通りである。(他のメタデータは参照されない) ・ACL (オプション、省略可) ・コンテンツタイプ (必須、省略不可) ・キャッシュフラグ (必須、省略不可) callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(metadata) metadata : Nebula.FileMetadata インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 引数で指定されたfileName } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; Nebula.FileBucket.selectUploadFile({ success: function(fileInfo) { var meta = new Nebula.FileMetadata(); meta.setContentType(fileInfo.type); meta.setCacheDisabled(false); var callbacks = { success: function(metadata) {....}, error: function(err) {....} }; bucket.uploadUpdateFile(fileInfo.name, fileInfo.path, meta, callbacks); }, error: function(err) {....} }); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"FileMetadata.html":{"id":"FileMetadata.html","title":"Class: FileMetadata","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: FileMetadata FileMetadata ファイルメタデータ クラス new FileMetadata() FileMetadata インスタンスを生成する Example var meta = new Nebula.FileMetadata(); Methods getAcl() ファイルに設定されているACLを取得する. ACLがセットされていない場合は null を返す Returns: ACLを返す。ACLがセットされていない場合は、null を返す。 Type Acl Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var acl = metadata.getAcl(); .... getContentType() ファイルに設定されているコンテンツタイプを取得する. コンテンツタイプがセットされていない場合は null を返す。 Returns: ファイルにセットされているコンテンツタイプを返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var contentType = metadata.getContentType(); .... getCreatedAt() ファイルの作成日時を取得する. 作成日時は、ISO 8601日付形式の文字列として返す。(例：2014-03-12T09:12:53.000Z) 作成日時がセットされていない場合は null を返す。 Returns: ファイルの作成日時を返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var createdAt = metadata.getCreatedAt(); .... getFileETag() fileETag(ファイルに対するETag)を取得する. fileEtagがセットされていない場合は null を返す 同期が完了していないファイルは、同期されるまで null が設定されている fileETag値は、サーバ側で同期するときに使用され、一致しない場合は衝突と判断される Returns: fileEtagを返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var etag = metadata.getFileETag(); .... getFileName() ファイル名を取得する. ファイル名がセットされていない場合は null を返す Returns: ファイル名を返す。ファイル名がセットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var fileName = metadata.getFileName(); .... getMetaETag() metaETag(ファイルメタデータに対するETag)を取得する. metaEtagがセットされていない場合は null を返す 同期が完了していないファイルは、同期されるまで null が設定されている metaETag値は、サーバ側で同期するときに使用され、一致しない場合は衝突と判断される Returns: metaEtagを返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var etag = metadata.getMetaETag(); .... getMetaId() ファイルメタデータIDを取得する. ファイルメタデータIDがセットされていない場合は null を返す 同期が完了していないファイルは、同期されるまで null が設定されている Returns: ファイルメタデータIDを返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var metaId = metadata.getMetaId(); .... getOptions() オプション情報(JSON)を取得する Returns: オプション Type Object getPublicUrl() ファイルに設定されている公開URLを取得する. 公開URLがセットされていない場合は null を返す。 Returns: 公開URLを返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var url = metadata.getPublicUrl(); .... getSize() ファイルのサイズを取得する. ファイルサイズがセットされていない場合は -1 を返す Returns: ファイルサイズを返す。セットされていない場合は、-1 を返す。 Type Int Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var size = metadata.getSize(); .... getUpdatedAt() ファイルの更新日時を取得する. 更新日時は、ISO 8601日付形式の文字列として返す。(例：2014-03-12T09:12:53.000Z) 更新日時がセットされていない場合は null を返す。 Returns: ファイルの更新日時を返す。セットされていない場合は、null を返す。 Type String Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var updatedAt = metadata.getUpdatedAt(); .... setAcl(acl) ファイルにACLをセットする. すでにACLがセットされている場合は上書きされる Parameters: Name Type Description acl Acl セットするACL Returns: this Type FileMetadata Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { var newAcl = new Nebula.Acl(); .... metadata.setAcl(newAcl); .... setContentType(contentType) コンテンツタイプをセットする. すでにコンテンツタイプがセットされている場合は上書きされる。 Parameters: Name Type Description contentType Acl セットするコンテンツタイプ Returns: this Type FileMetadata Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { metadata.setContentType(&quot;image/jpeg&quot;); .... setFileName(fileName) ファイル名をセットする. すでにファイル名がセットされている場合は上書きされる。 Parameters: Name Type Description fileName String ファイル名 Returns: this Type FileMetadata Example fileBucket.getMetadata(&quot;MyFile.txt&quot;).then(function(metadata) { metadata.setFileName(&quot;NewFileName.txt&quot;); .... setOptions(options) オプション情報(JSON)をセットする Parameters: Name Type Description options オプション Returns: this Type FileMetadata × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"Group.html":{"id":"Group.html","title":"Class: Group","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: Group Group グループ管理クラス new Group(groupname) グループオブジェクトを生成する ・オブジェクトを生成しただけでは、まだサーバにグループ登録されていない。グループ登録は、Group#save で実施する。 ・グループはアプリ毎ではなく、テナント毎に作成される。 Parameters: Name Type Description groupname String グループ名。 グループ名に使用できる文字は、１バイト英数のみ。 Returns: 新規グループオブジェクトのインスタンス Type Group Example var group = new Nebula.Group(&quot;group1&quot;); Members _id :String グループID Type: String acl :Acl ACL Type: Acl createdAt :String 作成日時 Type: String etag :String ETag Type: String groupname :String グループ名 Type: String groups :Array.&lt;String&gt; グループ名の一覧(配列) Type: Array.&lt;String&gt; updatedAt :String 更新日時 Type: String users :Array.&lt;String&gt; ユーザIDの一覧(配列) Type: Array.&lt;String&gt; Methods &lt;static&gt; delete() グループを削除する (Deprecated) ・本APIは Deprecated である。Group.remove を使用すること。 Deprecated: since v4.0.1 &lt;static&gt; query(conditions, callbacks) グループ検索 Parameters: Name Type Description conditions Object 取得条件 ・conditions にnull を指定した場合は全グループ一を取得する。 ・conditions は、JSON 形式で指定する。 { &quot;groupname&quot; : &quot;group1&quot; } (プロパティ名) groupname : グループ名 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(groups) groups : 取得した Nebula.Group インスタンスの配列 各要素に以下のグループのプロパティが更新される (プロパティ名) groupname : グループ名 users : 所属ユーザIDの一覧 groups : 所属サブグループ名の一覧 acl : ACL Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; remove(group, callbacks) グループ削除 Parameters: Name Type Description group Group 削除するグループオブジェクトのインスタンス ・group にnull は指定できない。 ・グループ削除に必要なインスタンスのプロパティは、以下の通りとする。 (プロパティ名) groupname : グループ名（必須） etag : グループに設定されるETag値（オプション） ・ETag値は、グループ新規保存した場合にサーバで追加され、 グループを更新する度にサーバで変更される固有値である。 ETag値は、グループの &quot;etag&quot;プロパティに格納される。 ・etagを指定すると、サーバに保存されているグループのETag値と照合される。 一致しなかった場合は、データ衝突として「409 Conflict」エラーとなり、グループは削除されない。 etagがnullの場合は、ETag値は照合されずグループは無条件で削除される。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の引数は無し。 Since: v4.0.1 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise addEntry(entry) グループエントリ追加 ・登録するグループにユーザまたはグループを追加する。 Parameters: Name Type Description entry Object Nebula.User またはNebula.Group のインスタンス ・entry は、グループに追加する Nebula.User または Nebula.Group のインスタンスを指定する。 各インスタンスには以下のプロパティが設定されていること。 Nebula.User (プロパティ名) _id : ユーザのID（*） (*) ユーザID は、ユーザ登録が成功した場合にSDK がユーザプロパティに設定する。 ユーザ取得、ログイン、カレントユーザ取得で取得したNebula.User のインスタンスには登録時のユーザID が設定されている。 Nebula.Group (プロパティ名) groupname : 登録済みグループ名 Returns: value エントリ結果 ・value は、エントリとして追加した場合 true、パラメータが不正の場合false が返る。 ・処理の成功により、以下のグループオブジェクトのプロパティが更新される。 (プロパティ名) users : グループにエントリされるユーザ(ID)の配列（*） groups : グループにエントリされるグループ名の配列（*） (*) グループプロパティ設定（group.set） でプロパティを設定した場合、エントリ追加した内容は上書きされる。 Type Boolean addMembers(userIds, groups, callbacks) グループメンバ追加 ・グループにユーザ・子グループを追加する。 Parameters: Name Type Description userIds Array.&lt;string&gt; 追加するユーザIDの配列 groups Array.&lt;string&gt; 追加するグループ名の配列 callbacks Callbacks 応答コールバック 処理が成功した場合、success の呼び出しにて通知する。 success の引数は以下の通り。 success(group) group : 変更したグループオブジェクトのインスタンス Since: 6.5.0 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise get(property) グループプロパティ取得 (Deprecated) ・グループオブジェクトのプロパティを取得する。 ・取得可能なプロパティの詳細は、各メソッドの説明を参照のこと。 ・本メソッドは Deprecated である。各フィールドの getter を使用すること。 Parameters: Name Type Description property String プロパティ名 Deprecated: since 5.0.0 Returns: value プロパティ値 Type String removeEntry(entry) グループエントリ削除 ・グループからユーザまたはグループを削除する。 Parameters: Name Type Description entry Object Nebula.User またはNebula.Group のインスタンス ・entry は、グループから削除する Nebula.User または Nebula.Group のインスタンスを指定する。 各インスタンスには以下のプロパティが設定されていること。 Nebula.User (プロパティ名) _id : ユーザのID（*） (*) ユーザID は、ユーザ登録が成功した場合にSDK がユーザプロパティに設定する。 ユーザ取得、ログイン、カレントユーザ取得で取得したNebula.User のインスタンスには登録時のユーザID が設定されている。 Nebula.Group (プロパティ名) groupname : 登録済みグループ名 Returns: value エントリ結果 ・value は、エントリから削除した場合 true、パラメータが不正の場合false が返る。 ・処理の成功により、以下のグループオブジェクトのプロパティが更新される。 (プロパティ名) users : グループにエントリされるユーザ(ID)の配列（*） groups : グループにエントリされるグループ名の配列（*） (*) グループプロパティ設定（group.set） でプロパティを設定した場合、エントリ追加した内容は上書きされる。 Type Boolean removeMembers(userIds, groups, callbacks) グループメンバ削除 ・グループからにユーザ・子グループを削除する Parameters: Name Type Description userIds Array.&lt;string&gt; 削除するユーザIDの配列 groups Array.&lt;string&gt; 削除するグループ名の配列 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(group) group : 変更したグループオブジェクトのインスタンス Since: 6.5.0 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise save(callbacks) グループ登録・更新 ・グループを登録する。 ・既に同一名称のグループが登録されている場合は更新となる。 ・グループ登録(又は更新)に必要なグループプロパティは、以下の通り。 groupname : グループ名（必須） users : グループに登録されるユーザ(ID)の配列（※） groups : グループに登録されるグループ名の配列（※） acl : グループに設定されるNebula.Acl のインスタンス（オプション) etag : グループに設定されるETag値（オプション) (※) グループに登録されるユーザ(ID)とグループ名の配列は、グループ プロパティ設定で配列を設定する方法とグループエントリの追加／ 削除で個別に設定する方法がある。 ・ETag値は、グループを登録した場合にサーバで追加され、 グループを更新する度にサーバで変更される固有値である。 ETag値は、グループの &quot;etag&quot;プロパティに格納される。 グループの登録の場合は、etagがないため必ず新規に生成・保存される。 ・グループプロパティにETag値が含まれる場合、サーバに保存されているグループのETag値と照合される。 一致しなかった場合は、データ衝突として「409 Conflict」エラーとなり、グループは更新されない。 Parameters: Name Type Description callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(group) group : 登録したグループオブジェクトのインスタンス acl を設定しなかった場合は以下のNebula.Acl インスタンスが自動的に設定される。 ・ログイン済みの場合 ：全フィールドが空。 オーナ（作成ユーザ）のみアクセス可。 ・未ログイン状態の場合 ：r, w に &quot;g:anonymous&quot; が設定される。 誰でも読み書き可。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise set(property, value) グループプロパティ設定 (Deprecated) ・グループオブジェクトのプロパティを設定する。 ・設定可能なプロパティの詳細は、各メソッドの説明を参照のこと。 ・本メソッドは Deprecated である。各フィールドの setter を使用すること。 Parameters: Name Type Description property String プロパティ名 value String プロパティ値 Deprecated: since 5.0.0 Returns: this Type Group × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"HttpRequest.html":{"id":"HttpRequest.html","title":"Class: HttpRequest","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: HttpRequest HttpRequest HTTPリクエストクラス new HttpRequest(service, path, option) コンストラクタ。 ユーザがログイン中の場合、自動的に SessionToken が設定される。 Parameters: Name Type Description service NebulaService NebulaService path string パス option Object オプション。noprefix プロパティに true を設定すると、パスプレフィクス(&quot;/1/{tenantId}&quot;)を付与しない。 Members responseHeaders :Object レスポンスヘッダ(Node.js のみ) Type: Object Methods &lt;static&gt; get() HTTP2 の使用・不使用状態を返す Returns: HTTP2を使用する場合は true Type boolean &lt;static&gt; getDefaultTimeout() デフォルト通信タイムアウト値を取得する Returns: タイムアウト値(ミリ秒) Type number &lt;static&gt; set(value) HTTP2 の使用・不使用を指定する。 HTTP2 を使用する場合は、Node.js v8.x 以上が必要。 Parameters: Name Type Description value boolean HTTP2を使用する場合は true &lt;static&gt; setDefaultTimeout(timeout) デフォルト通信タイムアウト値を設定する Parameters: Name Type Description timeout number タイムアウト値(ミリ秒) addQueryParams(params) クエリパラメータを追加する。以前設定されていた値に追加される。 Parameters: Name Type Description params Object パラメータ(Object形式) Returns: this Type HttpRequest addRequestHeader(header, value) リクエストヘッダを設定する。 注: 1つのヘッダに対して設定できる値は1つのみである。 Parameters: Name Type Description header string ヘッダ名 value string 値 Returns: this Type HttpRequest execute() HTTP リクエストを実行する。 X-Application-Id, X-Application-Key, X-Session-Token ヘッダは自動的に付与される。 Returns: Promise Type Promise setContentType(contentType) Content-Type 設定する Parameters: Name Type Description contentType string Content-Type Returns: this Type HttpRequest setData(data) 送信データを設定する。 文字列を指定した場合は文字列がそのまま設定される。 Objectを指定した場合は JSON 文字列に変換される。 Blob および Buffer を指定した場合は、バイナリデータが設定される。 Parameters: Name Type Description data Object データ Returns: this Type HttpRequest setMethod(method) HTTP メソッドを設定する Parameters: Name Type Description method string メソッド Returns: this Type HttpRequest setQueryParam(key, value) クエリパラメータ(1件)を設定する Parameters: Name Type Description key string パラメータ名 value Object 値 Returns: this Type HttpRequest setQueryParams(params) クエリパラメータを設定する。以前設定されていた値は消去される。 Parameters: Name Type Description params Object パラメータ(Object形式) Returns: this Type HttpRequest setReceiveResponseHeaders(receive) レスポンスヘッダ受信設定を行う。 true に設定すると、execute 成功時の応答は {body: ..., headers: {...}, status: statusCode} 形式となる。 ブラウザ(XHR)の場合は、headers は文字列(全ヘッダ連結したもの)、 Node.js の場合は headers はヘッダ名をキーとした Object となる。 Parameters: Name Type Description receive boolean true の場合はレスポンスヘッダを受信する Returns: this Type HttpRequest setResponseType(responseType) ResponseType を設定する。 指定できるタイプは以下のいずれかで、返却されるレスポンスの型が変化する。 デフォルトは &quot;text&quot;。 text : 文字列 json : JSON。レスポンスは JSON.parse されたもの。 blob : blob (ブラウザのみ) buffer : Buffer (Node.jsのみ) Parameters: Name Type Description responseType string レスポンスタイプ Returns: this Type HttpRequest setSessionToken(sessionToken) SessionToken を設定する。 通常は本クラスのインスタンス生成時点で自動的に SessionToken は設定されている(ユーザログイン済みの場合) Parameters: Name Type Description sessionToken string セッショントークン文字列 Returns: this Type HttpRequest × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"Nebula.html":{"id":"Nebula.html","title":"Namespace: Nebula","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Namespace: Nebula Nebula Nebula 名前空間。実体は NebulaService のデフォルトインスタンスである。 × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"NebulaService.html":{"id":"NebulaService.html","title":"Class: NebulaService","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: NebulaService NebulaService JavaScript SDK メインサービスクラス new NebulaService() NebulaService コンストラクタ。 NebulaService インスタンスを生成する。生成したインスタンス毎に異なるテナント/アプリに接続できる。 Nebula はデフォルトの NebulaService インスタンスである。 Example var service2 = new Nebula.NebulaService(); Members &lt;static, constant&gt; this.BUCKET_MODE_LOCAL バケットモード - ローカルモード &lt;static, constant&gt; this.BUCKET_MODE_ONLINE バケットモード - オンラインモード &lt;static, constant&gt; this.BUCKET_MODE_REPLICA バケットモード - レプリカモード Methods getAppID() アプリケーションIDを取得する Returns: アプリケーションID Type string getAppKey() アプリケーションキーを取得する Returns: アプリケーションキー Type string getBaseUri() エンドポイントURLを取得する Returns: エンドポイントURL Type string getCurrentUser() カレントユーザのログイン情報を返す。 未ログイン、またはセッショントークンが有効期限切れの場合は null を返す。 Returns: ユーザ情報。_id, username, email, sessionToken, expire, options, groups フィールドが含まれる。 Type Object getLoginCacheValidTime(callbacks) ログインキャッシュ有効期限の取得（オフライン機能限定） ・オフライン用ログインキャッシュ有効期限を取得する。 Parameters: Name Type Description callbacks Callbacks 結果を受け取るコールバック ・callbacks は、成功時と失敗時の応答コールバックを指定する。 { success : function(expire) { // 成功時の処理 // expire : ログインキャッシュ有効期限 }, error : function(error) { // 失敗時の処理 } } ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(expire) expireには、ログインキャッシュ有効期限（秒）が格納される。 ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(error) error : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ } Returns: Promise Type Promise.&lt;any&gt; getServiceID() サービスIDを返す Returns: サービスID Type string getTenantID() テナントIDを取得する Returns: テナントID Type string initialize(params) MBaaS JavaScript SDK 初期化 ・MBaaS JavaScript SDK（以降、SDKと称す）を初期化する。 ・アプリケーションは、SDK の初回利用またはパラメータ変更を行う際に呼び出さなければならない。 Parameters: Name Type Description params Object MBaaS JavaScript SDK 初期化パラメータ ・params は、初期化パラメータをJSON 形式で指定する。 { &quot;tenant&quot; : &quot;my-tenant-id&quot;, &quot;appId&quot; : &quot;my-app-id&quot;, &quot;appKey&quot; : &quot;my-app-key&quot;, &quot;baseUri&quot; : &quot;http://baas.example.com/api&quot;, &quot;offline&quot; : false, &quot;allowSelfSignedCert&quot; : false, &quot;serviceId&quot; : &quot;my-service-id&quot;, &quot;debugMode&quot; : &quot;debug&quot; } (プロパティ名) tenant : テナント毎に割り当てられるユニークなID（必須） appId : アプリケーション毎に割り当てられるユニークなID（必須） appKey : アプリケーション毎に割り当てられる秘密キー（必須） baseUri : MBaaS REST API のエンドポイントURL（必須） offline : オフライン機能の指定。（オプション） オフライン機能を利用する場合はtrue を指定する。（初期値：false） allowSelfSignedCert : 自己署名証明書の使用を認める指定。（オプション） オフラインモード使用時(SDE for SmartDevice使用時)、 及びNode.js使用時(Https Proxy未使用時)のみ有効。 (Node.jsでHttps Proxy使用時は、NebulaService#setHttpsProxy()を参照して設定を行うこと) SSL接続に自己署名証明書を使用しているMBaaSサーバを 利用する場合はtrue を指定する。（初期値：false） serviceId : NebulaService毎に割り当てられるユニークなID（オプション） マルチテナント機能を使用して複数のNebulaService(インスタンス)を生成する場合等に使用。 本IDはログイン情報キャッシュ時のKey情報に利用される。 debugMode : ログ出力レベル。（オプション） &quot;release&quot;, &quot;debug&quot;, &quot;test&quot; のいずれかを指定 debug は、コンソール上にデバッグログを出力する。 release は、クリティカルなエラー以外のコンソール上にデバッグログを出力しない。 test は、TBD。 Returns: this Type NebulaService isClientCertSet() client証明書の設定が有効または無効を返す(Node.js使用時のみ有効)。 https Proxyを使用する場合、本設定は無効である。 Returns: 証明書設定済みならばtrue Type boolean removeCurrentUser() カレントユーザのログイン情報を破棄する Returns: this Type NebulaService setAppKey(key) アプリケーションキーを変更する Parameters: Name Type Description key string アプリケーションキー Returns: this Type NebulaService setClientCertificate(certInfo) クライアント証明書の設定を行う (Node.js使用時のみ有効)。 https Proxyを使用する場合、本設定は無効である。NebulaService#setHttpsProxy()のoptionsに証明書の設定を行うこと。 Parameters: Name Type Description certInfo Object 証明書情報を指定する。 pfxとpassphrase(またはkeyとcert),ca を指定する。 pfxとcert/keyを同時に指定した場合の動作は保証しない。 nullを指定した場合は証明書の設定を解除する。 Returns: this Type NebulaService Example // p12(pfx)形式のクライアント証明書(証明書/秘密鍵)を指定、p12ファイルのパスフレーズを指定 // 信頼するCA証明書として、2件を指定する場合 service.setClientCertificate({ pfx: fs.readFileSync('clientCertificate.p12'), passphrase: 'password', ca: [fs.readFileSync('caCert1.pem'), fs.readFileSync('caCert2.pem')] }); // pem形式のクライアント証明、キーを使用。CA証明書を1件指定 service.setClientCertificate({ cert: fs.readFileSync('clientCert.pem'), key: fs.readFileSync('clientKey.pem'), ca: fs.readFileSync('caCert1.pem') }); setCurrentUser(user) カレントユーザのログイン情報をセットする。 ブラウザでは local storage に永続化され、NebulaService 間で共有される。 Node.js では NebulaService 内(メモリ)に個別に保持される。 Parameters: Name Type Description user User ユーザ Returns: this Type NebulaService setHttpProxy(proxy) HTTP プロキシを設定する (Node.js専用)。 'tunnel' モジュールが別途必要。 注: 本設定はグローバル設定である(NebulaService毎ではない) Parameters: Name Type Description proxy Object プロキシ設定。host, port を指定する。 Example // Example: Nebula.setHttpProxy({ host: 'proxysv.example.com', port: 8080}); setHttpsProxy(proxy, options) HTTPS プロキシを設定する (Node.js専用)。 'tunnel' モジュールが別途必要。 注: 本設定はグローバル設定である(NebulaService毎ではない) Parameters: Name Type Description proxy Object プロキシ設定。host, port を指定する。 options Object https.request() に引き渡すオプション(省略可)。 クライアント証明書認証に使用する証明書の設定などを行う。 使用方法はExampleを参照のこと。 Example // Example: // https Proxyを指定する Nebula.setHttpsProxy({ host: 'proxysv.example.com', port: 8080}); // p12(pfx)形式のクライアント証明書(証明書/秘密鍵)を指定、p12ファイルのパスフレーズを指定 // 信頼するCA証明書として、2件を指定する場合 Nebula.setHttpsProxy({ host: 'proxysv.example.com', port: 8080}, { pfx: fs.readFileSync('clientCertificate.p12'), passphrase: 'password', ca: [fs.readFileSync('caCert1.pem'), fs.readFileSync('caCert2.pem')] }); // pem形式のクライアント証明、キーを使用。CA証明書を1件指定 Nebula.setHttpsProxy({ host: 'proxysv.example.com', port: 8080}, { cert: fs.readFileSync('clientCert.pem'), key: fs.readFileSync('clientKey.pem'), ca: fs.readFileSync('caCert1.pem') }); // 自己署名証明書を使用しているサーバへの接続を許可する Nebula.setHttpsProxy({ host: 'proxysv.example.com', port: 8080}, { rejectUnauthorized: false }); setLoginCacheValidTime(expire, callbacks) ログインキャッシュ有効期限の設定（オフライン機能限定） ・オフライン用ログインキャッシュ有効期限を設定する。 Parameters: Name Type Description expire number ログインキャッシュ有効期限（秒） ・expireには、ログインキャッシュ有効期限（秒）を指定する。 デフォルトは、「259200秒（72時間）」である。 callbacks Callbacks 結果を受け取るコールバック ・callbacks は、成功時と失敗時の応答コールバックを指定する。 { success : function() { // 成功時の処理 }, error : function(error) { // 失敗時の処理 } } ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success() ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(error) error : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ } Returns: Promise Type Promise.&lt;any&gt; setNetworkEventListener(listener) ネットワークイベントリスナの登録（オフライン機能限定） ・ネットワークの接続状態変更イベントを受け取るリスナーを設定する。 Parameters: Name Type Description listener Object ネットワークイベントリスナ ・listener には、イベント発生時のコールバックを指定する。 { onNetworkStateChanged : function(isOnline) { // ネットワークの接続状態が変更されたときに呼び出される // isOnline : trueはオンライン状態、falseはオフライン状態 } } ・すでに登録している場合は、上書きされる。 ・登録を取り消す場合は、listener に null を指定する。 Returns: this Type NebulaService setSessionToken(sessionToken) セッショントークンをセットする。セッショントークンの有効期限は無期限扱い。 ユーザがログイン済みの場合は、セッショントークンのみが変更される。 未ログインの場合は、ダミーユーザが保存される (セッショントークン以外のフィールドは空)。 ブラウザでは local storage に永続化され、NebulaService 間で共有される。 Node.js では NebulaService 内(メモリ)に個別に保持される。 Parameters: Name Type Description sessionToken string セッショントークン Returns: this Type NebulaService × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:57+09:00 using the DocStrap template. "},"ObjectBucket.html":{"id":"ObjectBucket.html","title":"Class: ObjectBucket","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: ObjectBucket ObjectBucket オブジェクトバケット new ObjectBucket(name, mode) ObjectBucket インスタンスを生成する Parameters: Name Type Description name string バケットの名前 mode number バケットモード。 バケットモードには、以下のいずれかを指定する。 Nebula.BUCKET_MODE_ONLINE ： オンラインモード Nebula.BUCKET_MODE_REPLICA： レプリカモード Nebula.BUCKET_MODE_LOCAL ： ローカルモード modeを省略した場合や上記以外が指定された場合は、オンラインモードとして処理する。 Example var bucket = new Nebula.ObjectBucket(&quot;bucket1&quot;); Members &lt;static, constant&gt; CONFLICT_POLICY_CLIENT 衝突解決ポリシ: クライアント優先 &lt;static, constant&gt; CONFLICT_POLICY_MANUAL 衝突解決ポリシ: 手動解決(ユーザ通知) &lt;static, constant&gt; CONFLICT_POLICY_SERVER 衝突解決ポリシ: サーバ優先 &lt;static, constant&gt; SYNC_ERROR_OVERLAP_ID 同期エラー: ID衝突 &lt;static, constant&gt; SYNC_ERROR_PULL 同期エラー: PULLエラー &lt;static, constant&gt; SYNC_ERROR_PUSH 同期エラー: PUSHエラー &lt;static, constant&gt; SYNC_ERROR_PUSH_RESYNCING 同期エラー: PUSHエラー後、同期リトライ中 &lt;static, constant&gt; SYNC_ERROR_UNDEFINED 同期エラー: その他のエラー &lt;static&gt; useLongQuery true に設定すると、クエリはすべて longQuery 扱いとなる。 デフォルトは false。 Since: 5.0.0 Methods &lt;static&gt; getBucketList(callbacks) オブジェクトバケットのバケット名一覧を取得する Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucketList) bucketList : バケットの名前の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example callbacks = { success: function(bucketList) {....}, error: function(error) {....} }; Nebula.ObjectBucket.getBucketList(callbacks); &lt;static&gt; getLocalBucketList(callbacks) ローカル上に保存されているオブジェクトバケットのバケット名一覧を取得する. 本APIはオフラインのみで利用可能 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucketList) bucketList : バケットの名前の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example callbacks = { success: function(bucketList) {....}, error: function(error) {....} }; Nebula.ObjectBucket.getLocalBucketList(callbacks); &lt;static&gt; loadBucket(name, callbacks, mode) オブジェクトバケットを取得する Parameters: Name Type Description name string 取得するバケットの名前 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.ObjectBucketのインスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 取得に失敗したバケットの名前(nameと同じ) } mode number バケットモード バケットモードには、以下のいずれかを指定する。 Nebula.BUCKET_MODE_ONLINE ： オンラインモード Nebula.BUCKET_MODE_REPLICA： レプリカモード Nebula.BUCKET_MODE_LOCAL ： ローカルモード modeを省略した場合や上記以外が指定された場合は、オンラインモードとして処理する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 ただし、modeを指定する場合は、callbacksにnullを指定すること(省略不可) Type Promise Example callbacks = { success: function(bucket) {....}, error: function(err) {....} }; Nebula.ObjectBucket.loadBucket(&quot;Books&quot;, callbacks); &lt;static&gt; sync(callbacks) すべてのオブジェクトバケットの一括同期を実行する。(オフライン専用) 処理の進捗はsetSyncEventListener()で指定されたコールバックにて通知する。 各バケットごとにsetSyncScope()を使用して同期範囲を設定すること。 同期範囲が設定されていないバケットは、同期されない。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・callbacks は、成功時と失敗時の応答コールバックを指定する。 callbacks は本メソッドに対する処理結果であり、同期イベントはsetSyncEventListener()で指定されたコールバックにて通知する点に注意。 ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example Nebula.ObjectBucket.sync({ success: function() { .... }, error: function(err) { .... } }); aggregate(pipeline, options, callbacks) 集計(Aggregation)を実行する (オンライン専用)。 Parameters: Name Type Description pipeline Array.&lt;JsonObject&gt; Aggregation Pipeline JSON配列 複数のアイテムに対して $sort を実行する場合は、以下のように単一アイテムの $sort を複数連結すること。 $sort に複数のアイテムを記載した場合は、ソート順序が保証されない。 [ { &quot;$sort&quot;: { &quot;item1&quot;: 1 } }, { &quot;$sort&quot;: { &quot;item2&quot;: -1 } }, { &quot;$sort&quot;: { &quot;item3&quot;: 1 } } ] options JsonObject オプション callbacks Callbacks コールバック Since: 7.0.0 Returns: Type Promise.&lt;Array.&lt;JsonObject&gt;&gt; Example var bucket = ....; var pipeline = [ { &quot;$lookup&quot;: { ... } }, ... ]; var options = {}; bucket.aggregate(pipeline, options) .then(function(objects) { ... batch(request, callbacks) バッチリクエストを実行する Parameters: Name Type Description request BatchRequest バッチリクエスト callbacks Callbacks 応答コールバック ・バッチ処理が一部でも成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(result) result : バッチ応答(JSON)。応答フォーマットは REST API 仕様書を参照のこと。 'results'プロパティに結果が格納される。 これに加え、'failedCount'プロパティに処理失敗したリクエストの数が格納される。 ・バッチ処理全体が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(error) error : エラー要因がJSON 形式で返る。 Since: v4.0.0 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example // リクエスト生成 var req = new Nebula.BatchRequest(); // 追加オブジェクト設定 req.addInsertRequest({&quot;name&quot;: &quot;Taro Nichiden&quot;, &quot;score&quot;: 70}); req.addInsertRequest({&quot;name&quot;: &quot;Hanako Nichiden&quot;, &quot;score&quot;: 80}); // バッチリクエスト実行 bucket.batch(req).then(function(result) {...}); delete() オブジェクトバケットからオブジェクトを削除する (Deprecated) 本APIは Deprecated である。ObjectBucket#remove を使用すること。 Deprecated: since v4.0.1 deleteBucket(callbacks) オブジェクトバケットを削除する. バケットを削除する場合、事前にバケット内に格納されている全データを削除しておく必要がある。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.ObjectBucket インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : Nebula.ObjectBucket インスタンス } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Person&quot;); .... callbacks = { success: function(bucket) {....}, error: function(bucket, err) {....} }; bucket.deleteBucket(callbacks); getAcl() オブジェクトバケットのACLを取得する。 オブジェクトバケットのACLを取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある。 Returns: オブジェクトバケットのACL Type Acl Example var bucket = ....; .... var acl = bucket.getAcl(); getBucketMode() バケットモードを取得する Returns: バケットモード Type number Example var bucket = ....; .... var bucketMode = bucket.getBucketMode(); getBucketName() オブジェクトバケット名を取得する Returns: オブジェクトバケット名 Type string Example var bucket = ....; .... var bucketName = bucket.getBucketName(); getContentAcl() オブジェクトバケットのコンテンツACLを取得する。 オブジェクトバケットのコンテンツACLを取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある。 Returns: オブジェクトバケットのコンテンツACL Type Acl Example var bucket = ....; .... var acl = bucket.getAcl(); getDescription() オブジェクトバケットの「説明文」を取得する。 オブジェクトバケットの「説明文」を取得するには、loadBucket()を使用してサーバのバケット情報をロードしておく必要がある。 Returns: オブジェクトバケットに設定されている「説明文」 Type string Example var bucket = ....; .... var description = bucket.getDescription(); getIndexFromLocal(callbacks) オブジェクトバケットに設定されているインデックスを取得する(オフライン専用)。 本APIはオフラインのみで利用可能 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(index) index : インデックス情報(インデックス情報はJSON) ・インデックス情報は以下のように格納される { &quot;index&quot;: [{&quot;name&quot;: &quot;key1&quot;, &quot;type&quot;: &quot;string&quot;}, {&quot;name&quot;: &quot;Key2&quot;, &quot;type&quot;: &quot;number&quot;}] } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Books&quot;, Nebula.BUCKET_MODE_REPLICA);; .... callbacks = { success: function(index) {....}, error: function(err) {....} }; bucket.getIndexFromLocal(callbacks); getLastSyncTime(callbacks) 最終同期日時を取得する。(オフライン専用) 一度も同期していない場合、nullを返す。 本APIは、バケットモードがレプリカモードのバケットに対して呼び出すこと。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(lastSyncTime) lastSyncTime : 最終同期日時。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(....); .... bucket.getLastSyncTime( { success: function(lastSyncTime) { .... }, error: function(err) { .... } }); getResolveConflictPolicy(callbacks) 衝突解決ポリシを取得する(オフライン専用) Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(policy) policy : 衝突解決ポリシ。以下のいずれかの値。 Nebula.ObjectBucket.CONFLICT_POLICY_CLIENT ： クライアント優先で解決 Nebula.ObjectBucket.CONFLICT_POLICY_SERVER ： サーバ優先で解決 Nebula.ObjectBucket.CONFLICT_POLICY_MANUAL ： ユーザ通知 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(....); .... bucket.getResolveConflictPolicy( { success: function(policy) { .... }, error: function(err) { .... } }); getSyncScope(callbacks) 同期範囲を取得する（オフライン専用) Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(scope) scope : 取得した同期範囲。Nebula.ObjectQueryのインスタンス。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Books&quot;, Nebula.BUCKET_MODE_REPLICA); bucket.getSyncScope( { success: function(scope) { .... }, error: function(err) { .... } }); load(objectId, callbacks) オブジェクトバケットからオブジェクトを読み込む Parameters: Name Type Description objectId string オブジェクトID callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(object) object : 読み込んだオブジェクト(JSON) ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ &quot;data&quot; : 読み込みに失敗したオブジェクトID } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(object) {....}, error: function(objectId, err) {....} }; bucket.load(&quot;object_id&quot;, callbacks); longQuery(aQuery, callbacks) オブジェクトバケットからオブジェクトを検索する。 ObjectBucket#query と同じだが、クエリサイズの制限はない。 Parameters: Name Type Description aQuery ObjectQuery ObjectQuery インスタンス callbacks Callbacks 成功時と失敗時の応答コールバック Since: 5.0.0 Returns: Promise Type Promise longQueryWithCount(aQuery, callbacks) オブジェクトバケットからオブジェクトを検索する(クエリ件数付き) queryWithCount() と同じだが、クエリサイズの制限はない。 Parameters: Name Type Description aQuery ObjectQuery Nebula.ObjectQuery インスタンス callbacks Callbacks 成功時と失敗時の応答コールバック Since: 5.0.0 Returns: Promise Type Promise query(aQuery, callbacks) オブジェクトバケットからオブジェクトを検索する Parameters: Name Type Description aQuery ObjectQuery Nebula.ObjectQuery インスタンス callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(objects) objects : オブジェクト(JSON)の配列 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var query = new Nebula.ObjectQuery(); .... callbacks = { success: function(objects) {....}, error: function(err) {....} }; bucket.query(query, callbacks); queryWithCount(aQuery, callbacks) オブジェクトバケットからオブジェクトを検索する(クエリ件数付き) Parameters: Name Type Description aQuery ObjectQuery ObjectQuery インスタンス callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(result) result.objects : オブジェクト(JSON)の配列 result.count : 検索条件に合致したオブジェクトの総数 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var query = new Nebula.ObjectQuery(); .... callbacks = { success: function(result) {....}, error: function(err) {....} }; bucket.query(query, callbacks); remove(objectId, callbacks, etag) オブジェクトバケットからオブジェクトを削除する Parameters: Name Type Description objectId string オブジェクトID callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(objectId) objectId : 削除に成功したオブジェクトID ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ &quot;data&quot; : 削除に失敗したオブジェクトID } etag string オブジェクトに含まれるETag値。 ETag値は、オブジェクトを新規保存した場合にサーバで追加され、 オブジェクトを更新する度にサーバで変更される固有値である。 ETag値は、オブジェクトの &quot;etag&quot;プロパティに格納される。 etagを指定すると、サーバに保存されているオブジェクトのETag値と照合される。 一致しなかった場合は、データ衝突として「409 Conflict」エラーとなり、オブジェクトは削除されない。 etagを指定しなかった場合、または、nullを指定した場合は、ETag値は照合されずオブジェクトは無条件で削除される。 Since: v4.0.1 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... callbacks = { success: function(object) {....}, error: function(objectId, err) {....} }; bucket.remove(&quot;object_id&quot;, callbacks); removeCacheBucket(callbacks) キャッシュデータを削除する。(オフライン専用) オフライン用データベースに保存されたバケットとバケットに保存されたオブジェクトの情報を削除する。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(....); .... bucket.removeCacheBucket({ success: function() { .... }, error: function(err) { .... } }); resolveConflict(objectId, resolve) 衝突を解決する(オフライン専用)。 同期イベントの衝突通知(onSyncConflicted)で指定されたObjectBucketインスタンスに対して実行する。 Parameters: Name Type Description objectId string 衝突解決するオブジェクトのID resolve number 衝突解決方法 ・objectId には、衝突解決対象のオブジェクトのIDを指定する。 ・resolve には、以下のいずれかの衝突解決方法を指定する。 Nebula.ObjectBucket.RESOLVE_CLIENT ： クライアント優先で解決 Nebula.ObjectBucket.RESOLVE_SERVER ： サーバ優先で解決 Example var bucket = new Nebula.ObjectBucket(....); .... Nebula.ObjectBucket.setSyncEventListener({ onSyncStart: function(targetBucket) { .... }, onSyncCompleted: function(targetBucket, objectIds) { .... }, onSyncConflicted: function(bucket, client, server) { .... bucket.resolveConflict(objectId, Nebula.ObjectBucket.RESOLVE_CLIENT); }, onResolveConflict: function(resolveObject, resolve) { .... }, onSyncError: function(errorCode, errorObject) { .... } }); .... bucket.syncBucket({ success: function() { .... }, error: function(err) { .... } }); save(object, callbacks) オブジェクトバケットへオブジェクトを保存する. オブジェクトにETag値が含まれる場合、サーバに保存されているオブジェクトのETag値と照合される。 一致しなかった場合は、データ衝突として「409 Conflict」エラーとなり、オブジェクトは更新されない。 ETag値は、オブジェクトを新規保存した場合にサーバで追加され、 オブジェクトを更新する度にサーバで変更される固有値である。 ETag値は、オブジェクトの &quot;etag&quot;プロパティに格納される。 オブジェクトの新規保存の場合は、etagがないため必ず保存される。 すでに存在するオブジェクトを保存する場合、オブジェクトに指定したフィールドのみが更新される。 指定しないフィールドは更新されない(フィールドは削除されずそのまま残る) Parameters: Name Type Description object Object 保存するオブジェクト callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(object) object : 保存に成功したオブジェクト(JSON) 新規オブジェクトの場合は、以下のフィールドが追加される。 _id : オブジェクトID createdAt : 作成日時 updatedAt : 更新日時 ACL : このオブジェクトのACL。指定しなかった場合は追加される ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : 保存に失敗したオブジェクトID } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = ....; .... var myObj = {....}; .... callbacks = { success: function(object) {....}, error: function(object, err) {....} }; bucket.save(myObj, callbacks); saveBucket(callbacks) オブジェクトバケットを保存する. バケットはテナント毎に作成される。同一テナント内では同一名称のバケットを複数作成できない。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(bucket) bucket : Nebula.ObjectBucket インスタンス ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(err) err : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ, &quot;data&quot; : Nebula.ObjectBucket インスタンス } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Person&quot;); .... callbacks = { success: function(bucket) {....}, error: function(bucket, err) {....} }; bucket.saveBucket(callbacks); setAcl(acl) オブジェクトバケットのACLを設定する。 本メソッドを呼び出しただけでは、サーバに格納されているオブジェクトバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description acl Acl Nebula.ACL のインスタンス Returns: this Type ObjectBucket Example var bucket = ....; var acl = new Nebula.Acl(); .... acl.addEntry(....); .... bucket.setAcl(acl); setContentAcl(acl) オブジェクトバケットのコンテンツACLを設定する。 本メソッドを呼び出しただけでは、サーバに格納されているオブジェクトバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description acl Acl Nebula.ACL のインスタンス Returns: this Type ObjectBucket Example var bucket = ....; var acl = new Nebula.Acl(); .... acl.addEntry(....); .... bucket.setContentAcl(acl); setDescription(description) オブジェクトバケットに「説明文」を設定する。 本メソッドを呼び出しただけでは、サーバに格納されているオブジェクトバケットは更新されない。 サーバと同期するには、saveBucket()を呼び出す必要がある。 Parameters: Name Type Description description string オブジェクトバケットの「説明文」 Example var bucket = ....; .... bucket.setDescription(&quot;このバケットの説明文&quot;); setIndexToLocal(index, callbacks) オブジェクトバケットにインデックス設定する(オフライン専用)。 本APIはオフラインのみで利用可能 Parameters: Name Type Description index Object インデックス情報 インデックス情報は以下のようにJSONで指定する { &quot;index&quot;: [{&quot;name&quot;: &quot;key1&quot;, &quot;type&quot;: &quot;string&quot;}, {&quot;name&quot;: &quot;key2&quot;, &quot;type&quot;: &quot;number&quot;}] } ・index にはインデックスを設定するキー名と型を指定する。型は文字列で&quot;string&quot;,&quot;boolean&quot;,&quot;number&quot;のいずれかを指定する。 callbacks Callbacks 成功時と失敗時の応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Books&quot;, Nebula.BUCKET_MODE_REPLICA); .... index = { &quot;index&quot;: [{&quot;name&quot;: &quot;key1&quot;, &quot;type&quot;: &quot;string&quot;}, {&quot;name&quot;: &quot;key2&quot;, &quot;type&quot;: &quot;number&quot;}] }; callbacks = { success: function() {....}, error: function(err) {....} }; bucket.setIndexToLocal(index, callbacks); setResolveConflictPolicy(policy, callbacks) 衝突解決ポリシを設定する(オフライン専用) Parameters: Name Type Description policy number 設定する衝突解決ポリシ callbacks Callbacks 成功時と失敗時の応答コールバック ・policy は、以下のいずれかの衝突解決ポリシを指定する。 Nebula.ObjectBucket.CONFLICT_POLICY_CLIENT ： クライアント優先で解決 Nebula.ObjectBucket.CONFLICT_POLICY_SERVER ： サーバ優先で解決 Nebula.ObjectBucket.CONFLICT_POLICY_MANUAL ： ユーザ通知 ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(....); var policy = .... .... bucket.setResolveConflictPolicy(policy { success: function() { .... }, error: function(err) { .... } }); setSyncEventListener(listener) 同期イベントリスナを登録する(オフライン専用) Parameters: Name Type Description listener Object 同期イベントを受け取るイベントリスナ ・listener は、各同期イベント発生時のコールバックを指定する。 { onSyncStart : function(targetBucket) { // 同期開始時に呼び出される // targetBucket : 同期対象のバケット名 }, onSyncCompleted : function(targetBucket, objectIds) { // 同期完了時に呼び出される // targetBucket : 同期が完了したバケット名 // objectIds : 同期が完了したオブジェクトIDの配列 }, onSyncConflicted : function(bucket, client, server) { // 衝突発生時に呼び出される // bucket : 衝突が発生したバケットのNebula.ObjectBucketインスタンス(衝突解決時に使用) // client : クライアント側の衝突データ // server : サーバ側の衝突データ }, onResolveConflict : function(resolveObject, resolve) { // データの衝突の解決時に呼び出される // resolveObject : 解決に使用したデータ // resolve : 解決方法 }, onSyncError : function(errorCode, errorObject) { // 同期処理中のエラー発生時に呼び出される // errorCode : エラー種別 // Nebula.ObjectBucket.SYNC_ERROR_PULL ： 同期処理のPULLエラー // Nebula.ObjectBucket.SYNC_ERROR_PUSH ： 同期処理のPUSHエラー // Nebula.ObjectBucket.SYNC_ERROR_PUSH_RESYNCING ： 同期処理のpushエラー後に、同期リトライ中 // Nebula.ObjectBucket.SYNC_ERROR_OVERLAP_ID ： 同期処理のID重複エラー // errorObject : エラーが発生したオブジェクト }, } Example var bucket = new Nebula.ObjectBucket(&quot;Books&quot;, Nebula.BUCKET_MODE_REPLICA); bucket.setSyncEventListener({ onSyncStart: function(targetBucket) { .... }, onSyncCompleted: function(targetBucket, objectIds) { .... }, onSyncConflicted: function(bucket, client, server) { .... }, onResolveConflict: function(resolveObject, resolve) { .... }, onSyncError: function(errorCode, errorObject) { .... } }); setSyncScope(scope, callbacks) 同期範囲を設定する(オフライン専用)。 同期するには、本APIを呼び出して同期範囲を設定すること。 Parameters: Name Type Description scope Object 設定する同期範囲。Nebula.ObjectQueryのインスタンス。 ・Nebula.ObjectQueryのインスタンスで同期範囲として有効なものは、検索条件(setClause()メソッドでセット)のみである。 検索条件以外のその他(検索上限数やスキップカウントなど)は無効。 ・nullを指定した場合は、設定されている同期範囲を削除する。 ・すべてのオブジェクトを同期範囲にする場合は、インスタンスを生成しただけの空のNebula.ObjectQueryのインスタンスを指定する。 callbacks Callbacks 成功時と失敗時の応答コールバック ・scope は、Nebula.ObjectQueryのインスタンスを指定する。 ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(&quot;Books&quot;, Nebula.BUCKET_MODE_REPLICA); var clause = Nebula.Clause.greaterThan(&quot;number&quot;, 99); var scope = new Nebula.ObjectQuery(); scope.setClause(clause); ... bucket.setSyncScope(scope, { success: function() { .... }, error: function(err) { .... } }); syncBucket(callbacks) 同期を実行する(オフライン専用)。 特定のオブジェクトバケットに対し同期を行う。処理の進捗はsetSyncEventListener()で指定されたコールバックにて通知する。 setSyncScope()を使用して同期範囲を設定すること。同期範囲を設定しない場合、エラーとなり同期されない。 本APIは、バケットモードがレプリカモードのバケットに対して呼び出すこと。 Parameters: Name Type Description callbacks Callbacks 成功時と失敗時の応答コールバック ・callbacks は、成功時と失敗時の応答コールバックを指定する。 callbacks は本メソッドに対する処理結果であり、同期イベントはsetSyncEventListener()で指定されたコールバックにて通知する点に注意。 ・処理が成功した場合、success の呼び出しにて通知する。 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise Example var bucket = new Nebula.ObjectBucket(....); .... bucket.syncBucket({ success: function() { .... }, error: function(err) { .... } }); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"ObjectQuery.html":{"id":"ObjectQuery.html","title":"Class: ObjectQuery","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: ObjectQuery ObjectQuery オブジェクトクエリ new ObjectQuery() オブジェクトクエリを生成する Example var query = new Nebula.ObjectQuery(); Methods clearSortOrder(key) 設定したソート順序をクリアする。 Deprecated である。ObjectQuery#setSort を使用すること。 Parameters: Name Type Description key string クリアするソート対象のキー。省略時は全キーをクリアする。 Deprecated: since 6.5.0 Returns: this Type ObjectQuery Example var clause = Nebula.Clause.lessThan(&quot;score&quot;, 50); var query = new Nebula.ObjectQuery() .setClause(clause) .setLimit(10) .setSkipCount(5) .setSortOrder(&quot;name&quot;, true); .... query.clearSortOrder(&quot;name&quot;); getClause() 設定されているClauseインスタンスを取得する Returns: clause Type Clause getLimit() 設定されている検索上限数を取得する Returns: 検索上限数 Type number getProjection() 設定されているプロジェクションを取得する Returns: プロジェクション Type Object getSkipCount() 設定されているスキップカウントを取得する Returns: スキップカウント Type number getSort() 設定されているソート順序を取得する。 ソート順序は以下のようなキー文字列の配列。降順の場合はキーの先頭が &quot;-&quot; となる。 [&quot;key1&quot;, &quot;-key2&quot;] Since: 6.5.0 Returns: Type Array.&lt;string&gt; getSortOrder() 設定されているソート順序を取得する。 Deprecated である。ObjectQuery#getSort を使用すること。 ソート順序は以下のように {キー名: 昇順フラグ} の配列。 [{&quot;key1&quot;: true}, {&quot;key2&quot;: false}] Deprecated: since 6.5.0 Returns: ソート順序 Type array setClause(clause) 検索条件を設定する Parameters: Name Type Description clause Clause Nebula.Clauseインスタンス null を指定した場合は、すでに設定済みの検索条件をクリアする。 再度、本メソッドを呼び出した場合、検索条件は上書きされる。 デフォルトでは、null が設定されている。 Returns: this Type ObjectQuery Example var clause = Nebula.Clause.lessThan(&quot;score&quot;, 50); var query = new Nebula.ObjectQuery(); query.setClause(clause); setLimit(limit) 検索上限数を設定する Parameters: Name Type Description limit number 検索上限数。 -1 以上の値を指定できる。 -1を設定した場合は「制限なし」となる。 ただし、サーバ側のコンフィグレーションによっては、上限値が制限されている場合がある。この場合、クエリを実行するとサーバからエラーが返る。 デフォルトでは、-1 が設定されている。 範囲外の値が設定された場合は、例外をスローする。 Returns: this Type ObjectQuery Example var clause = Nebula.Clause.lessThan(&quot;score&quot;, 50); var query = new Nebula.ObjectQuery() .setClause(clause) .setLimit(10); setProjection(projectionJson) プロジェクションを指定する。 Parameters: Name Type Description projectionJson Object null を指定した場合は、すでに設定済みの値をクリアする。 再度、本メソッドを呼び出した場合は上書きされる。 デフォルトでは、null が設定されている。 Returns: this Type ObjectQuery Example var clause = Nebula.Clause.lessThan(&quot;score&quot;, 50); var projection = {&quot;score&quot;:1}; var query = new Nebula.ObjectQuery(); query.setClause(clause); query.setProjection(projection); setSkipCount(skip) スキップカウントを設定する。 スキップカウントは検索結果の先頭からのスキップ数を表す。 Parameters: Name Type Description skip number スキップカウント skip は、0以上の値が設定可能である。 範囲外の値が設定された場合は、例外をスローする。 デフォルトでは、0 が設定されている。 Returns: this Type ObjectQuery Example // この例では検索結果の5件目から10件を取得する。 var clause = Nebula.Clause.lessThan(&quot;score&quot;, 50); var query = new Nebula.ObjectQuery() .setClause(clause) .setLimit(10) .setSkipCount(5); setSort(sort) ソート順序を設定する。 Parameters: Name Type Description sort Array.&lt;string&gt; ソートキーの配列。 先に指定したものが高優先となる。 それぞれデフォルトは昇順。降順の場合は先頭に &quot;-&quot; を付与する。 Since: 6.5.0 Returns: this Type ObjectQuery Example var query = new Nebula.ObjectQuery() .setSort([&quot;key1&quot;, &quot;-key2&quot;]); setSortOrder(key, isAsc) ソート順序を設定する。 本メソッドはDeprecated である。ObjectQuery#setSort を使用すること。 複数のキーを設定する場合は、本メソッドを複数呼び出す。 先に設定したキーのほうが優先順位が高い。 ソート順序をクリアするには ObjectQuery#clearSortOrder を使用する。 Parameters: Name Type Description key string ソート対象のキー isAsc boolean 昇順でソートするかどうかを示す。昇順はtrue, 降順はfalse。 Deprecated: since 6.5.0 Returns: this Type ObjectQuery Example // 以下の例では、score降順 -&gt; name昇順で検索する var query = new Nebula.ObjectQuery() .setSortOrder(&quot;score&quot;, false) .setSortOrder(&quot;name&quot;, true); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"PushSender.html":{"id":"PushSender.html","title":"Class: PushSender","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: PushSender PushSender new PushSender() Push送信クラス Since: v4.0.0 Example var push = new Nebula.PushSender(); Classes ApnsFields GcmFields SseFields Members allowedReceivers :Array 受信可能なユーザ・グループの一覧 Type: Array Default Value: null apnsFields :PushSender.ApnsFields APNs 固有パラメータ Type: PushSender.ApnsFields Default Value: null clause :Clause 送信先条件 Type: Clause Default Value: null gcmFields :PushSender.GcmFields GCM 固有パラメータ Type: PushSender.GcmFields Default Value: null message :String 送信メッセージ Type: String Default Value: null sseFields :PushSender.SseFields SSE 固有パラメータ Type: PushSender.SseFields Default Value: null Methods send(callbacks) Push送信する。 Parameters: Name Type Description callbacks Callbacks 応答コールバック ・callbacks は、成功時と失敗時の応答コールバックを指定する。 { success : function(result) { // 成功時の処理 }, error : function(error) { // 失敗時の処理 } } ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(result) result : Pushリクエストの結果が JSON 形式で返る { &quot;result&quot;: &quot;ok&quot;, &quot;installations&quot;: 条件に合致したインスタレーションの数 } ・処理が失敗した場合は、error の呼び出しにて通知する。 error の書式は以下の通りとする。 error(error) error : エラー要因がJSON 形式で返る。 { &quot;status&quot; : ステータスコード, &quot;statusText&quot; : エラーメッセージ, &quot;responseText&quot; : レスポンスメッセージ } Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"PushSender.ApnsFields.html":{"id":"PushSender.ApnsFields.html","title":"Class: ApnsFields","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: ApnsFields PushSender. ApnsFields new ApnsFields() APNs用Push送信パラメータ Since: v4.0.0 Example var apns = new Nebula.PushSender.ApnsFields(); apns.badge = 5; apns.sound = &quot;sound1.aiff&quot;; apns.contentAvailable = 1; apns.category = &quot;Information&quot;; var push = new Nebula.PushSender(); push.apnsFields = apns; Members badge :number バッジカウント Type: number Default Value: undefined category :String Notificationカテゴリ Type: String Default Value: null contentAvailable :number 1 にセットすると、バックグランドPushを有効にする Type: number Default Value: undefined sound :String Application Bundle 内のサウンドファイル名 Type: String Default Value: undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"PushSender.GcmFields.html":{"id":"PushSender.GcmFields.html","title":"Class: GcmFields","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: GcmFields PushSender. GcmFields new GcmFields() FCM(旧GCM)用Push送信パラメータ Since: v4.0.0 Example var gcm = new Nebula.PushSender.GcmFields(); gcm.title = &quot;title&quot;; gcm.uri = &quot;http://www.nebula.test.com&quot;; var push = new Nebula.PushSender(); push.gcmFields = gcm; Members title :String システムバーに表示するタイトル Type: String Default Value: undefined uri :String 通知を開いたときに起動するURI Type: String Default Value: undefined × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"PushSender.SseFields.html":{"id":"PushSender.SseFields.html","title":"Class: SseFields","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: SseFields PushSender. SseFields new SseFields() SSE用Push送信パラメータ Since: v4.0.0 Example var sse = new Nebula.PushSender.SseFields(); sse.eventId = &quot;event01&quot;; sse.eventType = &quot;Information&quot;; var push = new Nebula.PushSender(); push.sseFields = sse; Members eventId :String イベントID Type: String Default Value: null eventType :String イベントタイプ Type: String Default Value: null × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "},"User.html":{"id":"User.html","title":"Class: User","body":" Documentation Namespaces AclGroupAclPermissionNebula Classes AccountLinkAclBatchRequestClauseCustomApiFileBucketFileMetadataGroupHttpRequestNebulaServiceObjectBucketObjectQueryPushSenderPushSender.ApnsFieldsPushSender.GcmFieldsPushSender.SseFieldsUser Global Global Class: User User ユーザ管理 クラス new User() ユーザオブジェクトを生成する。 生成しただけの状態では、まだサーバには登録されていない。ユーザ登録は User#register で実施する。 Returns: 新規ユーザオブジェクトのインスタンス Type Object Example var user = new Nebula.User(); Members _id :String ユーザID Type: String clientCertUser :boolean クライアント証明書認証ユーザの場合は true (ブラウザ、またはNode.jsのみ対応) Type: boolean createdAt :String 作成日時 Type: String email :String E-mail アドレス Type: String etag :String ETag Type: String expire :String セッショントークン有効期限(unix time [秒]) Type: String federated :boolean 外部認証連携有りの場合は true (ブラウザ、またはNode.jsのみ対応) Type: boolean Default Value: false groups :Array.&lt;String&gt; 所属グループ一覧 (read only) Type: Array.&lt;String&gt; lastLoginAt :String 最終ログイン日時 Type: String options :Object オプション (JSON) Type: Object password :String パスワード Type: String primaryLinkedUserId :String プライマリリンクユーザID OpenID Connect認証でユーザ自動生成時のリンクユーザID (ブラウザ、またはNode.jsのみ対応) Type: String Default Value: null sessionToken :String セッショントークン Type: String updatedAt :String 更新日時 Type: String username :String ユーザ名 Type: String Methods &lt;static&gt; current(callbacks) カレントユーザ取得 ・カレント（ログイン中）のユーザを取得する。 ・本情報はクライアントにキャッシュされている情報のため、サーバの最新情報とは一致しない場合がある。 Parameters: Name Type Description callbacks Callbacks 応答コールバック (Deprecated) ・callbacks は、成功時と失敗時の応答コールバックを指定する。 callbacks 引数は後方互換性維持のためにのみ存在するので、通常指定する必要はない。 { success : function(user) { // 成功時の処理 }, error : function(error) { // 失敗時の処理 } } ・処理が成功した場合、success コールバックを呼び出す。引数は、返り値と同じ。 ・本 API は失敗することはないため、error が呼ばれることはない。 Returns: ユーザオブジェクトのインスタンス。カレントユーザが存在しない場合は null が返る。 返り値に設定されるプロパティは以下のとおり。 _id : ユーザID sessionToken : セッショントークン expire : セッショントークン有効期限 (unix time [秒]) 以下の情報はオフライン機能無効時のみ取得可 username : ユーザ名 email : E-mailアドレス options : オプション groups : 所属グループ一覧 Type User &lt;static&gt; delete() ユーザ削除 (Deprecated) 本APIは Deprecated である。User.removeを使用すること。 Deprecated: since v4.0.1 &lt;static&gt; deleteAccountLink(user, linkedUserId, callbacks) OpenID Connectリンク情報削除 ・ユーザに設定された OpenID Connect リンク情報を削除する。 ・本 API はオフラインモードでは使用できない。 Parameters: Name Type Description user Object リンク情報削除するユーザオブジェクトのインスタンス。 null は指定できない。 リンク情報削除に必要なインスタンスのプロパティは、以下の通り。 _id : リンク情報削除するユーザのID カレントユーザ以外のリンク情報を削除する場合は、SDK 初期化時のアプリケーションキーにアプリケーションのマスターキーを指定すること。 linkedUserId string 削除するリンクユーザID。 null は指定できない。 user の primaryLinkedUserId と一致した場合は、例外をスローする。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の引数は無し。 Since: v6.5.0 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; getAccountLinks(user, callbacks) OpenID Connectリンク情報取得 ・ユーザに設定された OpenID Connect リンク情報を取得する。 ・本 API はオフラインモードでは使用できない。 Parameters: Name Type Description user Object リンク情報取得するユーザオブジェクトのインスタンス。 null は指定できない。 リンク情報取得に必要なインスタンスのプロパティは、以下の通り。 _id : リンク情報取得するユーザのID カレントユーザ以外のリンク情報を取得する場合は、SDK 初期化時のアプリケーションキーにアプリケーションのマスターキーを指定すること。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(links) links : リンク情報 (Nebula.AccountLink インスタンス) の配列 リンク情報が存在しない場合は、空が返る。 Since: v6.5.0 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; login(userInfo, callbacks) ログイン Parameters: Name Type Description userInfo Object ユーザ情報。 JSON 形式で指定する。null は指定できない。 { &quot;email&quot; : &quot;foo@example.com&quot;, &quot;password&quot; : &quot;passwOrd&quot; } { &quot;token&quot; : &quot;TOKEN&quot; } email : E-mailアドレス（※） username : ユーザ名（※） token : ワンタイムトークン（※） password : パスワード（E-mailアドレス、ユーザ名指定時は必須） (Y) email か username か token のいずれかを指定する。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(user) user : ログインしたユーザオブジェクトのインスタンス 処理の成功により、以下のユーザオブジェクトのプロパティが格納される (プロパティ名) _id : ログインしたユーザのID sessionToken : セッショントークン expire : ログインの有効期限 (unix time [秒]) (以下の情報はオフライン機能無効時のみ取得可) username : ユーザ名 email : E-mail options : オプション情報(JSON) groups : ユーザが所属するグループ名の配列 createdAt : ユーザの作成日時 updatedAt : ユーザの更新日時 lastLoginAt : ユーザの最終ログイン日時 etag : ETag federated : 外部認証連携有無 primaryLinkedUserId : プライマリリンクユーザID Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; logout(callbacks) ログアウト Parameters: Name Type Description callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success() Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; query(conditions, callbacks) ユーザ検索 Parameters: Name Type Description conditions Object 検索条件。 JSON 形式で指定する。省略した場合は全件検索となる。 検索用プロパティは以下の通り。 _id : ユーザのID（※） email : E-mailアドレス（※） username : ユーザ名（※） skip : スキップカウント limit : 件数上限(0は無制限、デフォルトは100) countQuery : 全件検索時に全件数をカウントする場合は true (デフォルトは false) (※) _id かemail かusername のいずれか1つを指定する。 いずれも指定しない場合は全件検索となる。 全件検索時は skip/limit で検索範囲を指定する。 (ただし skip/limit はオフライン有効時は無効) callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 conditions.countQuery が false の場合、success の書式は以下の通りとなる。 success(users) users : 取得したユーザオブジェクトインスタンスの配列 処理の成功により、配列毎に以下のユーザオブジェクトのプロパティが更新される (プロパティ名) username : ユーザ名 email : E-mailアドレス options : オプション groups : 所属グループ一覧 (注: '_id' を指定して検索した場合のみ。オフライン機能有効時は無効。) createdAt : ユーザ登録日付 updatedAt : 最終更新日付 lastLoginAt : 最終ログイン日時(マスターキー使用時のみ) etag : ETag federated : 外部認証連携有無 primaryLinkedUserId : プライマリリンクユーザID conditions.countQuery が true の場合、success の書式は以下の通りとなる。 success(json) json.users : 取得したユーザオブジェクトインスタンスの配列。内容は上記 users と同じ。 json.count : 全件数 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; queryCurrent(callbacks) カレントユーザ取得(サーバ問合せ) ・カレント（ログイン中）のユーザを取得する。サーバへの問い合わせが発生する。 Parameters: Name Type Description callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(user) user : ユーザオブジェクトのインスタンス。 カレントユーザが存在しない場合は、null が返る。 user に設定されるプロパティは以下のとおり。 (プロパティ名) _id : ユーザID username : ユーザ名 email : E-mailアドレス options : オプション groups : 所属グループ一覧 (注: '_id' を指定して検索した場合のみ。オフライン機能有効時は無効。) createdAt : ユーザ登録日時 updatedAt : 最終更新日時 lastLoginAt : 最終ログイン日時 etag : ETag federated : 外部認証連携有無 primaryLinkedUserId : プライマリリンクユーザID Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; remove(user, callbacks) ユーザを削除する。 Parameters: Name Type Description user Object 削除するユーザオブジェクトのインスタンス。 user にnull は指定できない。 ユーザ削除に必要なインスタンスのプロパティは、以下の通り。 _id : 更新するユーザのID ユーザID は、ユーザ登録が成功した場合にSDK がユーザプロパティに設定する。 カレントユーザ以外を削除する場合は、SDK 初期化時のアプリケーションキーにアプリケーションのマスターキーを指定すること。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success() Since: v4.0.1 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; resetPassword(userInfo, callbacks) ユーザパスワードリセット ・ユーザパスワードのリセットを行う。 ・ユーザパスワードのリセットは一定の時間内にリクエストできる回数に制限がある。 Parameters: Name Type Description userInfo Object ユーザ情報。 JSON 形式で指定する。null は指定できない。 以下いずれかのプロパティを指定すること。 email : E-mailアドレス username : ユーザ名 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success() Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise &lt;static&gt; saveCurrent(userInfo) カレントユーザ強制設定 ・カレント（ログイン中）のユーザを強制設定する。 ・すでにカレントユーザが存在する(ログイン中)の場合は、指定したプロパティだけが上書きされる。 ・本情報はクライアントにキャッシュされる。 ・本 API はオフラインモードでは使用できない。 ・本 API は通常のアプリケーションで使用するべきものではない。 Parameters: Name Type Description userInfo Object ユーザ情報(JSON)。null を指定した場合は、カレントユーザを削除する。 userInfo の書式は以下の通りとする。 指定したプロパティだけが上書き設定される。 _id : ユーザID sessionToken : セッショントークン expire : セッショントークン有効期限 (unix time [秒]) username : ユーザ名 email : E-mailアドレス options : オプション groups : 所属グループ一覧 &lt;static&gt; update(user, callbacks) ユーザ情報更新 Parameters: Name Type Description user User 更新するユーザオブジェクトのインスタンス。 user にnull は指定できない。 更新に必要なインスタンスのプロパティは、以下の通り。 _id : 更新するユーザのID（※） email : 更新するE-mailアドレス（オプション） password : 更新するパスワード（オプション） username : 更新するユーザ名（オプション） options : オプション(オプション) optionsには、JSON形式で記述された任意のオブジェクトを指定できる。 (※) ユーザID は、ユーザ登録が成功した場合にSDK がユーザプロパティに設定する。 カレントユーザ以外を更新する場合は、SDK 初期化時のアプリケーションキーにアプリケーションのマスターキーを指定すること。 callbacks Callbacks 応答コールバック ・処理が成功した場合、success の呼び出しにて通知する。 success の書式は以下の通りとする。 success(user) user : 更新したユーザオブジェクトのインスタンス 処理の成功により、以下のユーザオブジェクトのプロパティが更新される (プロパティ名) username : 更新されたユーザ名 email : 更新されたE-mailアドレス updatedAt : 最終更新日付 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise get(property) ユーザプロパティ取得 (Deprecated) ・ユーザオブジェクトのプロパティを取得する。 ・取得可能なプロパティの詳細は、各メソッドの説明を参照のこと。 ・本メソッドは deprecated である。各フィールドの getter を直接使用すること。 Parameters: Name Type Description property String プロパティ名。 指定可能なプロパティ名は以下のとおり(APIによって取得可能なプロパティは異なる)。 _id : ユーザID username: ユーザ名 email: E-mailアドレス password: パスワード options: オプション情報 (JSON) groups: 所属グループ一覧 (配列) createdAt: ユーザ登録日時 updatedAt: ユーザ更新日時 sessionToken: セッショントークン expire: セッショントークン有効期限(unix time [秒]) clientCertUser: クライアント証明書ユーザ (ブラウザ、またはNode.jsのみ対応) federated: 外部認証連携有無 primaryLinkedUserId: プライマリリンクユーザID Deprecated: Yes Returns: value プロパティ値 Type String register(callbacks) ユーザを登録する。 ユーザ登録に必要なユーザプロパティは、以下の通り。 email : E-mailアドレス（必須） password : パスワード（必須） username : ユーザ名（オプション） options : オプション(オプション)。JSON形式で記述された任意のオブジェクトを指定できる。 クライアント証明書認証用のユーザの登録を行う場合のユーザプロパティは以下の通りとする clientCertUserをtrueに設定した場合、email/passwordは無視する。 (ブラウザ、またはNode.jsのみ対応) username : ユーザ名（必須） clientCertUser : クライアント証明書ユーザ trueを設定すること(必須) options : オプション(オプション) optionsには、JSON形式で記述された任意のオブジェクトを指定できる。 Parameters: Name Type Description callbacks Callbacks 応答コールバック。 処理が成功した場合、success の呼び出しにて通知する。 なお、処理が成功した状態ではまだログインは実施していない。 引数は以下の通り。 user : ユーザオブジェクトのインスタンス 処理の成功により、以下のユーザオブジェクトのプロパティが追加格納される (プロパティ名) _id : 登録したユーザのID createdAt : 登録日付 updatedAt : 最終更新日付 Returns: callbacksを指定しなかった場合、Promiseオブジェクトを返す。callback指定時は返り値なし(undefined)。 Type Promise set(property, value) ユーザプロパティ設定 (Deprecated) ・ユーザオブジェクトのプロパティを設定する。 ・設定可能なプロパティの詳細は、各メソッドの説明を参照のこと。 ・本メソッドは deprecated である。各フィールドの setter を直接使用すること。 Parameters: Name Type Description property String プロパティ名。 指定可能なプロパティ名は以下のとおり。 _id : ユーザID username: ユーザ名 email: E-mailアドレス password: パスワード options: オプション情報 (JSON) createdAt: ユーザ登録日時 updatedAt: ユーザ更新日時 sessionToken: セッショントークン expire: セッショントークン有効期限(unix time [秒]) clientCertUser: クライアント証明書ユーザ (ブラウザ、またはNode.jsのみ対応) federated: 外部認証連携有無 primaryLinkedUserId: プライマリリンクユーザID value String プロパティ値 Deprecated: Yes Returns: this Type User × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-03-22T17:44:58+09:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
