==============
複数サーバ構成
==============

基本手順で述べた手順は、サーバ１台にすべての機能を搭載していましたが、
実運用では冗長性・スケーラビリティ確保のため複数サーバ構成としてください。

一般的な構成は以下のとおりです。

::

  ロードバランサ ⇒ リバースプロキシ ⇒ APサーバ ⇒ MongoDBクラスタ

クライアントからの接続はロードバランサが受け、後段のサーバに負荷分散します。

リバースプロキシは、SSL の終端を行い、後段の AP サーバにリクエストを
転送します。ロードバランサが SSLの終端を行う場合は、省略可能です。

APサーバは、REST API のリクエストを受付け処理を行います。
BaaS サーバアプリケーション本体は AP サーバの Tomcat 上で動作します。
冗長性確保のため最低２台必要です。負荷に応じてさらに台数を追加可能です。

MongoDBクラスタは、MongoDB サーバの集合です。
冗長性確保のためにレプリカセットを組んでください。レプリカセットの最低台数は３台です。
またスケーラビリティを向上させたい場合はさらにシャーディングを行い水平分割を行うことができます。



